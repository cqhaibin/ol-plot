{"version":3,"file":"ol-plot.js","sources":["../node_modules/_observable-emit@1.0.1@observable-emit/src/index.js","../src/Constants.js","../src/Utils/utils.js","../src/Utils/layerUtils.js","../node_modules/_autosize@4.0.2@autosize/dist/autosize.js","../src/Utils/domUtils.js","../src/Geometry/Text/PlotTextBox.js","../src/Utils/PlotTypes.js","../src/Geometry/point/Point.js","../src/Geometry/point/Pennant.js","../src/Geometry/Polyline/Polyline.js","../src/Geometry/Arc/Arc.js","../src/Geometry/Circle/Circle.js","../src/Geometry/Polyline/Curve.js","../src/Geometry/Polyline/FreeHandLine.js","../src/Geometry/Polygon/RectAngle.js","../src/Geometry/Circle/Ellipse.js","../src/Geometry/Polygon/Lune.js","../src/Geometry/Polygon/Sector.js","../src/Geometry/Polygon/ClosedCurve.js","../src/Geometry/Polygon/Polygon.js","../src/Geometry/Polygon/FreePolygon.js","../src/Geometry/Arrow/AttackArrow.js","../src/Geometry/Arrow/DoubleArrow.js","../src/Geometry/Arrow/StraightArrow.js","../src/Geometry/Arrow/FineArrow.js","../src/Geometry/Arrow/AssaultDirection.js","../src/Geometry/Arrow/TailedAttackArrow.js","../src/Geometry/Arrow/SquadCombat.js","../src/Geometry/Arrow/TailedSquadCombat.js","../src/Geometry/Polygon/GatheringPlace.js","../src/Geometry/Flag/RectFlag.js","../src/Geometry/Flag/TriangleFlag.js","../src/Geometry/Flag/CurveFlag.js","../src/core/PlotDraw.js","../src/core/PlotEdit.js","../src/Utils/factory.js","../src/core/PlotUtils.js","../src/index.js"],"sourcesContent":["const Observable = function () {\n  this.Events = {}\n  this.__cnt = 0\n}\n\nObservable.hasOwnKey = Function.call.bind(Object.hasOwnProperty)\n\nObservable.slice = Function.call.bind(Array.prototype.slice)\n\n/**\n * 事件分发\n * @param eventName\n * @param callback\n * @param context\n * @returns {(*|*)[]}\n */\nObservable.prototype.on = function (eventName, callback, context) {\n  return (this.bindEvent(eventName, callback, 0, context))\n}\n\n/**\n * 取消监听\n * @param event\n * @returns {boolean}\n */\nObservable.prototype.un = function (event) {\n  var eventName = ''\n  var key = ''\n  var r = false\n  var type = typeof event\n  var that = this\n  if (type === 'string') {\n    if (Observable.hasOwnKey(this.Events, event)) {\n      delete this.Events[event]\n      return true\n    }\n    return false\n  } else if (type === 'object') {\n    eventName = event[0]\n    key = event[1]\n    if (Observable.hasOwnKey(this.Events, eventName) && Observable.hasOwnKey(this.Events[eventName], key)) {\n      delete this.Events[eventName][key]\n      return true\n    }\n    return false\n  } else if (type === 'function') {\n    that.eachEvent(that.Events, function (keyA, itemA) {\n      that.eachEvent(itemA, function (keyB, itemB) {\n        if (itemB[0] === event) {\n          delete that.Events[keyA][keyB]\n          r = true\n        }\n      })\n    })\n    return r\n  }\n  return true\n}\n\n/**\n * 事件监听（只触发一次）\n * @param eventName\n * @param callback\n * @param context\n * @returns {(*|*)[]}\n */\nObservable.prototype.once = function (eventName, callback, context) {\n  return (this.bindEvent(eventName, callback, 1, context))\n}\n\n/**\n * 响应事件\n * @param eventName\n * @param args\n */\nObservable.prototype.action = function (eventName, args) {\n  if (Observable.hasOwnKey(this.Events, eventName)) {\n    this.eachEvent(this.Events[eventName], function (key, item) {\n      item[0].apply(item[2], args)\n      if (item[1]) {\n        delete this.Events[eventName][key]\n      }\n    })\n  }\n}\n\n/**\n * 实时触发响应\n * @param eventName\n */\nObservable.prototype.dispatch = function (eventName) {\n  var that = this\n  var args = Observable.slice(arguments, 1)\n  setTimeout(function () {\n    that.action(eventName, args)\n  })\n}\n\n/**\n * 延后触发响应\n * @param eventName\n */\nObservable.prototype.dispatchSync = function (eventName) {\n  this.action(eventName, Observable.slice(arguments, 1))\n}\n\n/**\n * 清空发布中心\n */\nObservable.prototype.clear = function () {\n  this.Events = {}\n}\n\n/**\n * 绑定事件\n * @param eventName\n * @param callback\n * @param isOne\n * @param context\n * @returns {[*,*]}\n */\nObservable.prototype.bindEvent = function (eventName, callback, isOne, context) {\n  if (typeof eventName !== 'string' || typeof callback !== 'function') {\n    throw new Error('传入的事件名称和回调函数有误！')\n  }\n  if (!Observable.hasOwnKey(this.Events, eventName)) {\n    this.Events[eventName] = {}\n  }\n  this.Events[eventName][++this.__cnt] = [callback, isOne, context]\n  return [eventName, this.__cnt]\n}\n\n/**\n * 循环触发事件\n * @param obj\n * @param callback\n */\nObservable.prototype.eachEvent = function (obj, callback) {\n  for (var key in obj) {\n    if (Observable.hasOwnKey(obj, key)) {\n      callback(key, obj[key])\n    }\n  }\n}\n\nexport default Observable\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 常用变量\r\n */\r\nexport const FITTING_COUNT = 100\r\nexport const HALF_PI = Math.PI / 2\r\nexport const ZERO_TOLERANCE = 0.0001\r\nexport const TWO_PI = Math.PI * 2\r\nexport const BASE_LAYERNAME = 'ol-plot-vector-layer' // 矢量图层名，（唯一标识）\r\nexport const BASE_HELP_CONTROL_POINT_ID = 'plot-helper-control-point-div' // 控制点要素的基类id\r\nexport const BASE_HELP_HIDDEN = 'plot-helper-hidden-div' // 父类隐藏容器\r\nexport const DEF_TEXT_STYEL = { // 默认文本框样式\r\n  borderRadius: '2px',\r\n  fontSize: '12px',\r\n  outline: 0,\r\n  overflow: 'hidden',\r\n  boxSizing: 'border-box',\r\n  border: '1px solid #eeeeee',\r\n  fontFamily: 'Helvetica Neue,Helvetica,PingFang SC,Hiragino Sans GB,Microsoft YaHei,Noto Sans CJK SC,WenQuanYi Micro Hei,Arial,sans-serif',\r\n  color: '#010500',\r\n  fontWeight: 400,\r\n  padding: '3px',\r\n  fontStretch: 'normal',\r\n  lineHeight: 'normal',\r\n  textAlign: 'left',\r\n  marginLeft: 'auto',\r\n  marginRight: 'auto',\r\n  width: 'auto',\r\n  height: 'auto',\r\n  background: 'rgb(255, 255, 255)',\r\n  fontStyle: '',\r\n  fontVariant: ''\r\n}\r\n","import * as Constants from '../Constants'\r\n/**\r\n * 计算两个坐标之间的距离\r\n * @param pnt1\r\n * @param pnt2\r\n * @returns {number}\r\n * @constructor\r\n */\r\nexport const MathDistance = (pnt1, pnt2) => {\r\n  return (Math.sqrt(Math.pow((pnt1[0] - pnt2[0]), 2) + Math.pow((pnt1[1] - pnt2[1]), 2)))\r\n}\r\n\r\n/**\r\n * 计算点集合的总距离\r\n * @param points\r\n * @returns {number}\r\n */\r\nexport const wholeDistance = (points) => {\r\n  let distance = 0\r\n  if (points && Array.isArray(points) && points.length > 0) {\r\n    points.forEach((item, index) => {\r\n      if (index < points.length - 1) {\r\n        distance += (MathDistance(item, points[index + 1]))\r\n      }\r\n    })\r\n  }\r\n  return distance\r\n}\r\n/**\r\n * 获取基础长度\r\n * @param points\r\n * @returns {number}\r\n */\r\nexport const getBaseLength = (points) => {\r\n  return Math.pow(wholeDistance(points), 0.99)\r\n}\r\n\r\n/**\r\n * 求取两个坐标的中间值\r\n * @param point1\r\n * @param point2\r\n * @returns {[*,*]}\r\n * @constructor\r\n */\r\nexport const Mid = (point1, point2) => {\r\n  return [(point1[0] + point2[0]) / 2, (point1[1] + point2[1]) / 2]\r\n}\r\n\r\n/**\r\n * 通过三个点确定一个圆的中心点\r\n * @param point1\r\n * @param point2\r\n * @param point3\r\n */\r\nexport const getCircleCenterOfThreePoints = (point1, point2, point3) => {\r\n  let pntA = [(point1[0] + point2[0]) / 2, (point1[1] + point2[1]) / 2]\r\n  let pntB = [pntA[0] - point1[1] + point2[1], pntA[1] + point1[0] - point2[0]]\r\n  let pntC = [(point1[0] + point3[0]) / 2, (point1[1] + point3[1]) / 2]\r\n  let pntD = [pntC[0] - point1[1] + point3[1], pntC[1] + point1[0] - point3[0]]\r\n  return getIntersectPoint(pntA, pntB, pntC, pntD)\r\n}\r\n\r\n/**\r\n * 获取交集的点\r\n * @param pntA\r\n * @param pntB\r\n * @param pntC\r\n * @param pntD\r\n * @returns {[*,*]}\r\n */\r\nexport const getIntersectPoint = (pntA, pntB, pntC, pntD) => {\r\n  if (pntA[1] === pntB[1]) {\r\n    let f = (pntD[0] - pntC[0]) / (pntD[1] - pntC[1])\r\n    let x = f * (pntA[1] - pntC[1]) + pntC[0]\r\n    let y = pntA[1]\r\n    return [x, y]\r\n  }\r\n  if (pntC[1] === pntD[1]) {\r\n    let e = (pntB[0] - pntA[0]) / (pntB[1] - pntA[1])\r\n    let x = e * (pntC[1] - pntA[1]) + pntA[0]\r\n    let y = pntC[1]\r\n    return [x, y]\r\n  }\r\n  let e = (pntB[0] - pntA[0]) / (pntB[1] - pntA[1])\r\n  let f = (pntD[0] - pntC[0]) / (pntD[1] - pntC[1])\r\n  let y = (e * pntA[1] - pntA[0] - f * pntC[1] + pntC[0]) / (e - f)\r\n  let x = e * y - e * pntA[1] + pntA[0]\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 获取方位角（地平经度）\r\n * @param startPoint\r\n * @param endPoint\r\n * @returns {*}\r\n */\r\nexport const getAzimuth = (startPoint, endPoint) => {\r\n  let azimuth\r\n  let angle = Math.asin(Math.abs(endPoint[1] - startPoint[1]) / (MathDistance(startPoint, endPoint)))\r\n  if (endPoint[1] >= startPoint[1] && endPoint[0] >= startPoint[0]) {\r\n    azimuth = angle + Math.PI\r\n  } else if (endPoint[1] >= startPoint[1] && endPoint[0] < startPoint[0]) {\r\n    azimuth = Math.PI * 2 - angle\r\n  } else if (endPoint[1] < startPoint[1] && endPoint[0] < startPoint[0]) {\r\n    azimuth = angle\r\n  } else if (endPoint[1] < startPoint[1] && endPoint[0] >= startPoint[0]) {\r\n    azimuth = Math.PI - angle\r\n  }\r\n  return azimuth\r\n}\r\n\r\n/**\r\n * 通过三个点获取方位角\r\n * @param pntA\r\n * @param pntB\r\n * @param pntC\r\n * @returns {number}\r\n */\r\nexport const getAngleOfThreePoints = (pntA, pntB, pntC) => {\r\n  let angle = getAzimuth(pntB, pntA) - getAzimuth(pntB, pntC)\r\n  return ((angle < 0) ? (angle + Math.PI * 2) : angle)\r\n}\r\n\r\n/**\r\n * 判断是否是顺时针\r\n * @param pnt1\r\n * @param pnt2\r\n * @param pnt3\r\n * @returns {boolean}\r\n */\r\nexport const isClockWise = (pnt1, pnt2, pnt3) => {\r\n  return ((pnt3[1] - pnt1[1]) * (pnt2[0] - pnt1[0]) > (pnt2[1] - pnt1[1]) * (pnt3[0] - pnt1[0]))\r\n}\r\n\r\n/**\r\n * 获取线上的点\r\n * @param t\r\n * @param startPnt\r\n * @param endPnt\r\n * @returns {[*,*]}\r\n */\r\nexport const getPointOnLine = (t, startPnt, endPnt) => {\r\n  let x = startPnt[0] + (t * (endPnt[0] - startPnt[0]))\r\n  let y = startPnt[1] + (t * (endPnt[1] - startPnt[1]))\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 获取立方值\r\n * @param t\r\n * @param startPnt\r\n * @param cPnt1\r\n * @param cPnt2\r\n * @param endPnt\r\n * @returns {[*,*]}\r\n */\r\nexport const getCubicValue = (t, startPnt, cPnt1, cPnt2, endPnt) => {\r\n  t = Math.max(Math.min(t, 1), 0)\r\n  let [tp, t2] = [(1 - t), (t * t)]\r\n  let t3 = t2 * t\r\n  let tp2 = tp * tp\r\n  let tp3 = tp2 * tp\r\n  let x = (tp3 * startPnt[0]) + (3 * tp2 * t * cPnt1[0]) + (3 * tp * t2 * cPnt2[0]) + (t3 * endPnt[0])\r\n  let y = (tp3 * startPnt[1]) + (3 * tp2 * t * cPnt1[1]) + (3 * tp * t2 * cPnt2[1]) + (t3 * endPnt[1])\r\n  return [x, y]\r\n}\r\n\r\n/**\r\n * 根据起止点和旋转方向求取第三个点\r\n * @param startPnt\r\n * @param endPnt\r\n * @param angle\r\n * @param distance\r\n * @param clockWise\r\n * @returns {[*,*]}\r\n */\r\nexport const getThirdPoint = (startPnt, endPnt, angle, distance, clockWise) => {\r\n  let azimuth = getAzimuth(startPnt, endPnt)\r\n  let alpha = clockWise ? (azimuth + angle) : (azimuth - angle)\r\n  let dx = distance * Math.cos(alpha)\r\n  let dy = distance * Math.sin(alpha)\r\n  return ([endPnt[0] + dx, endPnt[1] + dy])\r\n}\r\n\r\n/**\r\n * 函数继承\r\n * @param childCtor\r\n * @param parentCtor\r\n */\r\nexport const inherits = (childCtor, parentCtor) => {\r\n  /** @constructor */\r\n  function TempCtor () {\r\n  }\r\n\r\n  TempCtor.prototype = parentCtor.prototype\r\n  childCtor.superClass_ = parentCtor.prototype\r\n  childCtor.prototype = new TempCtor()\r\n  /** @override */\r\n  childCtor.prototype.constructor = childCtor\r\n  childCtor.base = function (me, methodName, varArgs) {\r\n    let args = Array.prototype.slice.call(arguments, 2)\r\n    return parentCtor.prototype[methodName].apply(me, args)\r\n  }\r\n}\r\n\r\n/**\r\n * 插值弓形线段点\r\n * @param center\r\n * @param radius\r\n * @param startAngle\r\n * @param endAngle\r\n * @returns {null}\r\n */\r\nexport const getArcPoints = (center, radius, startAngle, endAngle) => {\r\n  let [x, y, pnts, angleDiff] = [null, null, [], (endAngle - startAngle)]\r\n  angleDiff = ((angleDiff < 0) ? (angleDiff + (Math.PI * 2)) : angleDiff)\r\n  for (let i = 0; i <= 100; i++) {\r\n    let angle = startAngle + angleDiff * i / 100\r\n    x = center[0] + radius * Math.cos(angle)\r\n    y = center[1] + radius * Math.sin(angle)\r\n    pnts.push([x, y])\r\n  }\r\n  return pnts\r\n}\r\n\r\n/**\r\n * getBisectorNormals\r\n * @param t\r\n * @param pnt1\r\n * @param pnt2\r\n * @param pnt3\r\n * @returns {[*,*]}\r\n */\r\nexport const getBisectorNormals = (t, pnt1, pnt2, pnt3) => {\r\n  let normal = getNormal(pnt1, pnt2, pnt3)\r\n  let [bisectorNormalRight, bisectorNormalLeft, dt, x, y] = [null, null, null, null, null]\r\n  let dist = Math.sqrt(normal[0] * normal[0] + normal[1] * normal[1])\r\n  let uX = normal[0] / dist\r\n  let uY = normal[1] / dist\r\n  let d1 = MathDistance(pnt1, pnt2)\r\n  let d2 = MathDistance(pnt2, pnt3)\r\n  if (dist > Constants.ZERO_TOLERANCE) {\r\n    if (isClockWise(pnt1, pnt2, pnt3)) {\r\n      dt = t * d1\r\n      x = pnt2[0] - dt * uY\r\n      y = pnt2[1] + dt * uX\r\n      bisectorNormalRight = [x, y]\r\n      dt = t * d2\r\n      x = pnt2[0] + dt * uY\r\n      y = pnt2[1] - dt * uX\r\n      bisectorNormalLeft = [x, y]\r\n    } else {\r\n      dt = t * d1\r\n      x = pnt2[0] + dt * uY\r\n      y = pnt2[1] - dt * uX\r\n      bisectorNormalRight = [x, y]\r\n      dt = t * d2\r\n      x = pnt2[0] - dt * uY\r\n      y = pnt2[1] + dt * uX\r\n      bisectorNormalLeft = [x, y]\r\n    }\r\n  } else {\r\n    x = pnt2[0] + t * (pnt1[0] - pnt2[0])\r\n    y = pnt2[1] + t * (pnt1[1] - pnt2[1])\r\n    bisectorNormalRight = [x, y]\r\n    x = pnt2[0] + t * (pnt3[0] - pnt2[0])\r\n    y = pnt2[1] + t * (pnt3[1] - pnt2[1])\r\n    bisectorNormalLeft = [x, y]\r\n  }\r\n  return [bisectorNormalRight, bisectorNormalLeft]\r\n}\r\n\r\n/**\r\n * 获取默认三点的内切圆\r\n * @param pnt1\r\n * @param pnt2\r\n * @param pnt3\r\n * @returns {[*,*]}\r\n */\r\nexport const getNormal = (pnt1, pnt2, pnt3) => {\r\n  let dX1 = pnt1[0] - pnt2[0]\r\n  let dY1 = pnt1[1] - pnt2[1]\r\n  let d1 = Math.sqrt(dX1 * dX1 + dY1 * dY1)\r\n  dX1 /= d1\r\n  dY1 /= d1\r\n  let dX2 = pnt3[0] - pnt2[0]\r\n  let dY2 = pnt3[1] - pnt2[1]\r\n  let d2 = Math.sqrt(dX2 * dX2 + dY2 * dY2)\r\n  dX2 /= d2\r\n  dY2 /= d2\r\n  let uX = dX1 + dX2\r\n  let uY = dY1 + dY2\r\n  return [uX, uY]\r\n}\r\n\r\n/**\r\n * 获取左边控制点\r\n * @param controlPoints\r\n * @returns {[*,*]}\r\n */\r\nexport const getLeftMostControlPoint = (controlPoints, t) => {\r\n  let [pnt1, pnt2, pnt3, controlX, controlY] = [controlPoints[0], controlPoints[1], controlPoints[2], null, null]\r\n  let pnts = getBisectorNormals(0, pnt1, pnt2, pnt3)\r\n  let normalRight = pnts[0]\r\n  let normal = getNormal(pnt1, pnt2, pnt3)\r\n  let dist = Math.sqrt(normal[0] * normal[0] + normal[1] * normal[1])\r\n  if (dist > Constants.ZERO_TOLERANCE) {\r\n    let mid = Mid(pnt1, pnt2)\r\n    let pX = pnt1[0] - mid[0]\r\n    let pY = pnt1[1] - mid[1]\r\n    let d1 = MathDistance(pnt1, pnt2)\r\n    let n = 2.0 / d1\r\n    let nX = -n * pY\r\n    let nY = n * pX\r\n    let a11 = nX * nX - nY * nY\r\n    let a12 = 2 * nX * nY\r\n    let a22 = nY * nY - nX * nX\r\n    let dX = normalRight[0] - mid[0]\r\n    let dY = normalRight[1] - mid[1]\r\n    controlX = mid[0] + a11 * dX + a12 * dY\r\n    controlY = mid[1] + a12 * dX + a22 * dY\r\n  } else {\r\n    controlX = pnt1[0] + t * (pnt2[0] - pnt1[0])\r\n    controlY = pnt1[1] + t * (pnt2[1] - pnt1[1])\r\n  }\r\n  return [controlX, controlY]\r\n}\r\n\r\n/**\r\n * 获取右边控制点\r\n * @param controlPoints\r\n * @param t\r\n * @returns {[*,*]}\r\n */\r\nexport const getRightMostControlPoint = (controlPoints, t) => {\r\n  let count = controlPoints.length\r\n  let pnt1 = controlPoints[count - 3]\r\n  let pnt2 = controlPoints[count - 2]\r\n  let pnt3 = controlPoints[count - 1]\r\n  let pnts = getBisectorNormals(0, pnt1, pnt2, pnt3)\r\n  let normalLeft = pnts[1]\r\n  let normal = getNormal(pnt1, pnt2, pnt3)\r\n  let dist = Math.sqrt(normal[0] * normal[0] + normal[1] * normal[1])\r\n  let [controlX, controlY] = [null, null]\r\n  if (dist > Constants.ZERO_TOLERANCE) {\r\n    let mid = Mid(pnt2, pnt3)\r\n    let pX = pnt3[0] - mid[0]\r\n    let pY = pnt3[1] - mid[1]\r\n    let d1 = MathDistance(pnt2, pnt3)\r\n    let n = 2.0 / d1\r\n    let nX = -n * pY\r\n    let nY = n * pX\r\n    let a11 = nX * nX - nY * nY\r\n    let a12 = 2 * nX * nY\r\n    let a22 = nY * nY - nX * nX\r\n    let dX = normalLeft[0] - mid[0]\r\n    let dY = normalLeft[1] - mid[1]\r\n    controlX = mid[0] + a11 * dX + a12 * dY\r\n    controlY = mid[1] + a12 * dX + a22 * dY\r\n  } else {\r\n    controlX = pnt3[0] + t * (pnt2[0] - pnt3[0])\r\n    controlY = pnt3[1] + t * (pnt2[1] - pnt3[1])\r\n  }\r\n  return [controlX, controlY]\r\n}\r\n\r\n/**\r\n * 插值曲线点\r\n * @param t\r\n * @param controlPoints\r\n * @returns {null}\r\n */\r\nexport const getCurvePoints = (t, controlPoints) => {\r\n  let leftControl = getLeftMostControlPoint(controlPoints, t)\r\n  let [pnt1, pnt2, pnt3, normals, points] = [null, null, null, [leftControl], []]\r\n  for (let i = 0; i < controlPoints.length - 2; i++) {\r\n    [pnt1, pnt2, pnt3] = [controlPoints[i], controlPoints[i + 1], controlPoints[i + 2]]\r\n    let normalPoints = getBisectorNormals(t, pnt1, pnt2, pnt3)\r\n    normals = normals.concat(normalPoints)\r\n  }\r\n  let rightControl = getRightMostControlPoint(controlPoints, t)\r\n  if (rightControl) {\r\n    normals.push(rightControl)\r\n  }\r\n  for (let i = 0; i < controlPoints.length - 1; i++) {\r\n    pnt1 = controlPoints[i]\r\n    pnt2 = controlPoints[i + 1]\r\n    points.push(pnt1)\r\n    for (let t = 0; t < Constants.FITTING_COUNT; t++) {\r\n      let pnt = getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i * 2], normals[i * 2 + 1], pnt2)\r\n      points.push(pnt)\r\n    }\r\n    points.push(pnt2)\r\n  }\r\n  return points\r\n}\r\n\r\n/**\r\n * 贝塞尔曲线\r\n * @param points\r\n * @returns {*}\r\n */\r\nexport const getBezierPoints = function (points) {\r\n  if (points.length <= 2) {\r\n    return points\r\n  } else {\r\n    let bezierPoints = []\r\n    let n = points.length - 1\r\n    for (let t = 0; t <= 1; t += 0.01) {\r\n      let [x, y] = [0, 0]\r\n      for (let index = 0; index <= n; index++) {\r\n        let factor = getBinomialFactor(n, index)\r\n        let a = Math.pow(t, index)\r\n        let b = Math.pow((1 - t), (n - index))\r\n        x += factor * a * b * points[index][0]\r\n        y += factor * a * b * points[index][1]\r\n      }\r\n      bezierPoints.push([x, y])\r\n    }\r\n    bezierPoints.push(points[n])\r\n    return bezierPoints\r\n  }\r\n}\r\n\r\n/**\r\n * 获取阶乘数据\r\n * @param n\r\n * @returns {number}\r\n */\r\nexport const getFactorial = (n) => {\r\n  let result = 1\r\n  switch (n) {\r\n    case (n <= 1):\r\n      result = 1\r\n      break\r\n    case (n === 2):\r\n      result = 2\r\n      break\r\n    case (n === 3):\r\n      result = 6\r\n      break\r\n    case (n === 24):\r\n      result = 24\r\n      break\r\n    case (n === 5):\r\n      result = 120\r\n      break\r\n    default:\r\n      for (let i = 1; i <= n; i++) {\r\n        result *= i\r\n      }\r\n      break\r\n  }\r\n  return result\r\n}\r\n\r\n/**\r\n * 获取二项分布\r\n * @param n\r\n * @param index\r\n * @returns {number}\r\n */\r\nexport const getBinomialFactor = (n, index) => {\r\n  return (getFactorial(n) / (getFactorial(index) * getFactorial(n - index)))\r\n}\r\n\r\n/**\r\n * 插值线性点\r\n * @param points\r\n * @returns {*}\r\n */\r\nexport const getQBSplinePoints = points => {\r\n  if (points.length <= 2) {\r\n    return points\r\n  } else {\r\n    let [n, bSplinePoints] = [2, []]\r\n    let m = points.length - n - 1\r\n    bSplinePoints.push(points[0])\r\n    for (let i = 0; i <= m; i++) {\r\n      for (let t = 0; t <= 1; t += 0.05) {\r\n        let [x, y] = [0, 0]\r\n        for (let k = 0; k <= n; k++) {\r\n          let factor = getQuadricBSplineFactor(k, t)\r\n          x += factor * points[i + k][0]\r\n          y += factor * points[i + k][1]\r\n        }\r\n        bSplinePoints.push([x, y])\r\n      }\r\n    }\r\n    bSplinePoints.push(points[points.length - 1])\r\n    return bSplinePoints\r\n  }\r\n}\r\n\r\n/**\r\n * 得到二次线性因子\r\n * @param k\r\n * @param t\r\n * @returns {number}\r\n */\r\nexport const getQuadricBSplineFactor = (k, t) => {\r\n  let res = 0\r\n  if (k === 0) {\r\n    res = Math.pow(t - 1, 2) / 2\r\n  } else if (k === 1) {\r\n    res = (-2 * Math.pow(t, 2) + 2 * t + 1) / 2\r\n  } else if (k === 2) {\r\n    res = Math.pow(t, 2) / 2\r\n  }\r\n  return res\r\n}\r\n\r\n/**\r\n * 获取id\r\n * @returns {*|string|!Array.<T>}\r\n */\r\nexport const getuuid = () => {\r\n  let [ s, hexDigits ] = [ [], '0123456789abcdef' ]\r\n  for (let i = 0; i < 36; i++) {\r\n    s[i] = hexDigits.substr(Math.floor(Math.random() * 0x10), 1)\r\n  }\r\n  s[14] = '4'\r\n  s[19] = hexDigits.substr((s[19] & 0x3) | 0x8, 1)\r\n  s[8] = s[13] = s[18] = s[23] = '-'\r\n  return (s.join(''))\r\n}\r\n\r\n/**\r\n * 添加标识\r\n * @param obj\r\n * @returns {*}\r\n */\r\nexport const stamp = function (obj) {\r\n  let key = '_event_id_'\r\n  obj[key] = obj[key] || (getuuid())\r\n  return obj[key]\r\n}\r\n\r\n/**\r\n * 去除字符串前后空格\r\n * @param str\r\n * @returns {*}\r\n */\r\nexport const trim = (str) => {\r\n  return str.trim ? str.trim() : str.replace(/^\\s+|\\s+$/g, '')\r\n}\r\n\r\n/**\r\n * 将类名截取成数组\r\n * @param str\r\n * @returns {Array|*}\r\n */\r\nexport const splitWords = (str) => {\r\n  return trim(str).split(/\\s+/)\r\n}\r\n\r\n/**\r\n * 判断是否为对象\r\n * @param value\r\n * @returns {boolean}\r\n */\r\nexport const isObject = value => {\r\n  const type = typeof value\r\n  return value !== null && (type === 'object' || type === 'function')\r\n}\r\n\r\n/**\r\n * merge\r\n * @param a\r\n * @param b\r\n * @returns {*}\r\n */\r\nexport const merge = (a, b) => {\r\n  for (const key in b) {\r\n    if (isObject(b[key]) && isObject(a[key])) {\r\n      merge(a[key], b[key])\r\n    } else {\r\n      a[key] = b[key]\r\n    }\r\n  }\r\n  return a\r\n}\r\n\r\nexport function preventDefault (e) {\r\n  e = e || window.event\r\n  if (e.preventDefault) {\r\n    e.preventDefault()\r\n  } else {\r\n    e.returnValue = false\r\n  }\r\n}\r\n\r\nexport function bindAll (fns, context) {\r\n  fns.forEach((fn) => {\r\n    if (!context[fn]) { return }\r\n    context[fn] = context[fn].bind(context)\r\n  })\r\n}\r\n","import {\r\n  Style as $Style,\r\n  Stroke as $Stroke,\r\n  Fill as $Fill,\r\n  Circle as $Circle\r\n} from 'ol/style'\r\n\r\nimport {\r\n  Group as $Group,\r\n  Vector as $VectorLayer\r\n} from 'ol/layer'\r\n\r\nimport { Vector as $VectorSource } from 'ol/source'\r\n\r\n/**\r\n * 通过layerName获取图层\r\n * @param map\r\n * @param layerName\r\n * @returns {*}\r\n */\r\nconst getLayerByLayerName = function (map, layerName) {\r\n  try {\r\n    let targetLayer = null\r\n    if (map) {\r\n      let layers = map.getLayers().getArray()\r\n      targetLayer = getLayerInternal(layers, 'layerName', layerName)\r\n    }\r\n    return targetLayer\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\n/**\r\n * 内部处理获取图层方法\r\n * @param layers\r\n * @param key\r\n * @param value\r\n * @returns {*}\r\n */\r\nconst getLayerInternal = function (layers, key, value) {\r\n  let _target = null\r\n  if (layers.length > 0) {\r\n    layers.every(layer => {\r\n      if (layer instanceof $Group) {\r\n        let layers = layer.getLayers().getArray()\r\n        _target = getLayerInternal(layers, key, value)\r\n        if (_target) {\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      } else if (layer.get(key) === value) {\r\n        _target = layer\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n  return _target\r\n}\r\n\r\n/**\r\n * 创建临时图层\r\n * @param map\r\n * @param layerName\r\n * @param params\r\n * @returns {*}\r\n */\r\nconst createVectorLayer = function (map, layerName, params) {\r\n  try {\r\n    if (map) {\r\n      let vectorLayer = getLayerByLayerName(map, layerName)\r\n      if (!(vectorLayer instanceof $VectorLayer)) {\r\n        vectorLayer = null\r\n      }\r\n      if (!vectorLayer) {\r\n        if (params && params.create) {\r\n          vectorLayer = new $VectorLayer({\r\n            layerName: layerName,\r\n            params: params,\r\n            layerType: 'vector',\r\n            source: new $VectorSource({\r\n              wrapX: false\r\n            }),\r\n            style: new $Style({\r\n              fill: new $Fill({\r\n                color: 'rgba(67, 110, 238, 0.4)'\r\n              }),\r\n              stroke: new $Stroke({\r\n                color: '#4781d9',\r\n                width: 2\r\n              }),\r\n              image: new $Circle({\r\n                radius: 7,\r\n                fill: new $Fill({\r\n                  color: '#ffcc33'\r\n                })\r\n              })\r\n            })\r\n          })\r\n        }\r\n      }\r\n      if (map && vectorLayer) {\r\n        if (params && params.hasOwnProperty('selectable')) {\r\n          vectorLayer.set('selectable', params.selectable)\r\n        }\r\n        // 图层只添加一次\r\n        let _vectorLayer = getLayerByLayerName(map, layerName)\r\n        if (!_vectorLayer || !(_vectorLayer instanceof $VectorLayer)) {\r\n          map.addLayer(vectorLayer)\r\n        }\r\n      }\r\n      return vectorLayer\r\n    }\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\nexport {\r\n  createVectorLayer,\r\n  getLayerByLayerName\r\n}\r\n","/*!\n\tautosize 4.0.2\n\tlicense: MIT\n\thttp://www.jacklmoore.com/autosize\n*/\n(function (global, factory) {\n\tif (typeof define === \"function\" && define.amd) {\n\t\tdefine(['module', 'exports'], factory);\n\t} else if (typeof exports !== \"undefined\") {\n\t\tfactory(module, exports);\n\t} else {\n\t\tvar mod = {\n\t\t\texports: {}\n\t\t};\n\t\tfactory(mod, mod.exports);\n\t\tglobal.autosize = mod.exports;\n\t}\n})(this, function (module, exports) {\n\t'use strict';\n\n\tvar map = typeof Map === \"function\" ? new Map() : function () {\n\t\tvar keys = [];\n\t\tvar values = [];\n\n\t\treturn {\n\t\t\thas: function has(key) {\n\t\t\t\treturn keys.indexOf(key) > -1;\n\t\t\t},\n\t\t\tget: function get(key) {\n\t\t\t\treturn values[keys.indexOf(key)];\n\t\t\t},\n\t\t\tset: function set(key, value) {\n\t\t\t\tif (keys.indexOf(key) === -1) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t\tvalues.push(value);\n\t\t\t\t}\n\t\t\t},\n\t\t\tdelete: function _delete(key) {\n\t\t\t\tvar index = keys.indexOf(key);\n\t\t\t\tif (index > -1) {\n\t\t\t\t\tkeys.splice(index, 1);\n\t\t\t\t\tvalues.splice(index, 1);\n\t\t\t\t}\n\t\t\t}\n\t\t};\n\t}();\n\n\tvar createEvent = function createEvent(name) {\n\t\treturn new Event(name, { bubbles: true });\n\t};\n\ttry {\n\t\tnew Event('test');\n\t} catch (e) {\n\t\t// IE does not support `new Event()`\n\t\tcreateEvent = function createEvent(name) {\n\t\t\tvar evt = document.createEvent('Event');\n\t\t\tevt.initEvent(name, true, false);\n\t\t\treturn evt;\n\t\t};\n\t}\n\n\tfunction assign(ta) {\n\t\tif (!ta || !ta.nodeName || ta.nodeName !== 'TEXTAREA' || map.has(ta)) return;\n\n\t\tvar heightOffset = null;\n\t\tvar clientWidth = null;\n\t\tvar cachedHeight = null;\n\n\t\tfunction init() {\n\t\t\tvar style = window.getComputedStyle(ta, null);\n\n\t\t\tif (style.resize === 'vertical') {\n\t\t\t\tta.style.resize = 'none';\n\t\t\t} else if (style.resize === 'both') {\n\t\t\t\tta.style.resize = 'horizontal';\n\t\t\t}\n\n\t\t\tif (style.boxSizing === 'content-box') {\n\t\t\t\theightOffset = -(parseFloat(style.paddingTop) + parseFloat(style.paddingBottom));\n\t\t\t} else {\n\t\t\t\theightOffset = parseFloat(style.borderTopWidth) + parseFloat(style.borderBottomWidth);\n\t\t\t}\n\t\t\t// Fix when a textarea is not on document body and heightOffset is Not a Number\n\t\t\tif (isNaN(heightOffset)) {\n\t\t\t\theightOffset = 0;\n\t\t\t}\n\n\t\t\tupdate();\n\t\t}\n\n\t\tfunction changeOverflow(value) {\n\t\t\t{\n\t\t\t\t// Chrome/Safari-specific fix:\n\t\t\t\t// When the textarea y-overflow is hidden, Chrome/Safari do not reflow the text to account for the space\n\t\t\t\t// made available by removing the scrollbar. The following forces the necessary text reflow.\n\t\t\t\tvar width = ta.style.width;\n\t\t\t\tta.style.width = '0px';\n\t\t\t\t// Force reflow:\n\t\t\t\t/* jshint ignore:start */\n\t\t\t\tta.offsetWidth;\n\t\t\t\t/* jshint ignore:end */\n\t\t\t\tta.style.width = width;\n\t\t\t}\n\n\t\t\tta.style.overflowY = value;\n\t\t}\n\n\t\tfunction getParentOverflows(el) {\n\t\t\tvar arr = [];\n\n\t\t\twhile (el && el.parentNode && el.parentNode instanceof Element) {\n\t\t\t\tif (el.parentNode.scrollTop) {\n\t\t\t\t\tarr.push({\n\t\t\t\t\t\tnode: el.parentNode,\n\t\t\t\t\t\tscrollTop: el.parentNode.scrollTop\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t\tel = el.parentNode;\n\t\t\t}\n\n\t\t\treturn arr;\n\t\t}\n\n\t\tfunction resize() {\n\t\t\tif (ta.scrollHeight === 0) {\n\t\t\t\t// If the scrollHeight is 0, then the element probably has display:none or is detached from the DOM.\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tvar overflows = getParentOverflows(ta);\n\t\t\tvar docTop = document.documentElement && document.documentElement.scrollTop; // Needed for Mobile IE (ticket #240)\n\n\t\t\tta.style.height = '';\n\t\t\tta.style.height = ta.scrollHeight + heightOffset + 'px';\n\n\t\t\t// used to check if an update is actually necessary on window.resize\n\t\t\tclientWidth = ta.clientWidth;\n\n\t\t\t// prevents scroll-position jumping\n\t\t\toverflows.forEach(function (el) {\n\t\t\t\tel.node.scrollTop = el.scrollTop;\n\t\t\t});\n\n\t\t\tif (docTop) {\n\t\t\t\tdocument.documentElement.scrollTop = docTop;\n\t\t\t}\n\t\t}\n\n\t\tfunction update() {\n\t\t\tresize();\n\n\t\t\tvar styleHeight = Math.round(parseFloat(ta.style.height));\n\t\t\tvar computed = window.getComputedStyle(ta, null);\n\n\t\t\t// Using offsetHeight as a replacement for computed.height in IE, because IE does not account use of border-box\n\t\t\tvar actualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(computed.height)) : ta.offsetHeight;\n\n\t\t\t// The actual height not matching the style height (set via the resize method) indicates that \n\t\t\t// the max-height has been exceeded, in which case the overflow should be allowed.\n\t\t\tif (actualHeight < styleHeight) {\n\t\t\t\tif (computed.overflowY === 'hidden') {\n\t\t\t\t\tchangeOverflow('scroll');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// Normally keep overflow set to hidden, to avoid flash of scrollbar as the textarea expands.\n\t\t\t\tif (computed.overflowY !== 'hidden') {\n\t\t\t\t\tchangeOverflow('hidden');\n\t\t\t\t\tresize();\n\t\t\t\t\tactualHeight = computed.boxSizing === 'content-box' ? Math.round(parseFloat(window.getComputedStyle(ta, null).height)) : ta.offsetHeight;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (cachedHeight !== actualHeight) {\n\t\t\t\tcachedHeight = actualHeight;\n\t\t\t\tvar evt = createEvent('autosize:resized');\n\t\t\t\ttry {\n\t\t\t\t\tta.dispatchEvent(evt);\n\t\t\t\t} catch (err) {\n\t\t\t\t\t// Firefox will throw an error on dispatchEvent for a detached element\n\t\t\t\t\t// https://bugzilla.mozilla.org/show_bug.cgi?id=889376\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tvar pageResize = function pageResize() {\n\t\t\tif (ta.clientWidth !== clientWidth) {\n\t\t\t\tupdate();\n\t\t\t}\n\t\t};\n\n\t\tvar destroy = function (style) {\n\t\t\twindow.removeEventListener('resize', pageResize, false);\n\t\t\tta.removeEventListener('input', update, false);\n\t\t\tta.removeEventListener('keyup', update, false);\n\t\t\tta.removeEventListener('autosize:destroy', destroy, false);\n\t\t\tta.removeEventListener('autosize:update', update, false);\n\n\t\t\tObject.keys(style).forEach(function (key) {\n\t\t\t\tta.style[key] = style[key];\n\t\t\t});\n\n\t\t\tmap.delete(ta);\n\t\t}.bind(ta, {\n\t\t\theight: ta.style.height,\n\t\t\tresize: ta.style.resize,\n\t\t\toverflowY: ta.style.overflowY,\n\t\t\toverflowX: ta.style.overflowX,\n\t\t\twordWrap: ta.style.wordWrap\n\t\t});\n\n\t\tta.addEventListener('autosize:destroy', destroy, false);\n\n\t\t// IE9 does not fire onpropertychange or oninput for deletions,\n\t\t// so binding to onkeyup to catch most of those events.\n\t\t// There is no way that I know of to detect something like 'cut' in IE9.\n\t\tif ('onpropertychange' in ta && 'oninput' in ta) {\n\t\t\tta.addEventListener('keyup', update, false);\n\t\t}\n\n\t\twindow.addEventListener('resize', pageResize, false);\n\t\tta.addEventListener('input', update, false);\n\t\tta.addEventListener('autosize:update', update, false);\n\t\tta.style.overflowX = 'hidden';\n\t\tta.style.wordWrap = 'break-word';\n\n\t\tmap.set(ta, {\n\t\t\tdestroy: destroy,\n\t\t\tupdate: update\n\t\t});\n\n\t\tinit();\n\t}\n\n\tfunction destroy(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.destroy();\n\t\t}\n\t}\n\n\tfunction update(ta) {\n\t\tvar methods = map.get(ta);\n\t\tif (methods) {\n\t\t\tmethods.update();\n\t\t}\n\t}\n\n\tvar autosize = null;\n\n\t// Do nothing in Node.js environment and IE8 (or lower)\n\tif (typeof window === 'undefined' || typeof window.getComputedStyle !== 'function') {\n\t\tautosize = function autosize(el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\treturn el;\n\t\t};\n\t} else {\n\t\tautosize = function autosize(el, options) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], function (x) {\n\t\t\t\t\treturn assign(x, options);\n\t\t\t\t});\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.destroy = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], destroy);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t\tautosize.update = function (el) {\n\t\t\tif (el) {\n\t\t\t\tArray.prototype.forEach.call(el.length ? el : [el], update);\n\t\t\t}\n\t\t\treturn el;\n\t\t};\n\t}\n\n\texports.default = autosize;\n\tmodule.exports = exports['default'];\n});","/* eslint no-useless-escape: \"off\" */\r\nconst SPECIAL_CHARS_REGEXP = /([\\:\\-\\_]+(.))/g\r\nconst MOZ_HACK_REGEXP = /^moz([A-Z])/\r\n\r\n/* istanbul ignore next */\r\nexport const create = function (tagName, className, container, id) {\r\n  let el = document.createElement(tagName)\r\n  el.className = className || ''\r\n  if (id) {\r\n    el.id = id\r\n  }\r\n  if (container) {\r\n    container.appendChild(el)\r\n  }\r\n  return el\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const getElement = function (id) {\r\n  return typeof id === 'string' ? document.getElementById(id) : id\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const remove = function (el) {\r\n  let parent = el.parentNode\r\n  if (parent) {\r\n    parent.removeChild(el)\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const empty = function (el) {\r\n  while (el.firstChild) {\r\n    el.removeChild(el.firstChild)\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const createHidden = function (tagName, parent, id) {\r\n  let element = document.createElement(tagName)\r\n  element.style.display = 'none'\r\n  if (id) {\r\n    element.id = id\r\n  }\r\n  if (parent) {\r\n    parent.appendChild(element)\r\n  }\r\n  return element\r\n}\r\n\r\n/* istanbul ignore next */\r\nconst trim = function (string) {\r\n  return (string || '').replace(/^[\\s\\uFEFF]+|[\\s\\uFEFF]+$/g, '')\r\n}\r\n\r\n/* istanbul ignore next */\r\nconst camelCase = function (name) {\r\n  return name.replace(SPECIAL_CHARS_REGEXP, function (_, separator, letter, offset) {\r\n    return offset ? letter.toUpperCase() : letter\r\n  }).replace(MOZ_HACK_REGEXP, 'Moz$1')\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport const on = (function () {\r\n  if (document.addEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event && handler) {\r\n        element.addEventListener(event, handler, false)\r\n      }\r\n    }\r\n  }\r\n})()\r\n\r\n/* istanbul ignore next */\r\nexport const off = (function () {\r\n  if (document.removeEventListener) {\r\n    return function (element, event, handler) {\r\n      if (element && event) {\r\n        element.removeEventListener(event, handler, false)\r\n      }\r\n    }\r\n  }\r\n})()\r\n\r\n/* istanbul ignore next */\r\nexport const once = function (el, event, fn) {\r\n  const listener = function () {\r\n    if (fn) {\r\n      fn.apply(this, arguments)\r\n    }\r\n    off(el, event, listener)\r\n  }\r\n  on(el, event, listener)\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function hasClass (el, cls) {\r\n  if (!el || !cls) return false\r\n  if (cls.indexOf(' ') !== -1) throw new Error('className should not contain space.')\r\n  if (el.classList) {\r\n    return el.classList.contains(cls)\r\n  } else {\r\n    return (' ' + el.className + ' ').indexOf(' ' + cls + ' ') > -1\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function addClass (el, cls) {\r\n  if (!el) return\r\n  let curClass = el.className\r\n  let classes = (cls || '').split(' ')\r\n  for (let i = 0, j = classes.length; i < j; i++) {\r\n    let clsName = classes[i]\r\n    if (!clsName) continue\r\n    if (el.classList) {\r\n      el.classList.add(clsName)\r\n    } else if (!hasClass(el, clsName)) {\r\n      curClass += ' ' + clsName\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = curClass\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function removeClass (el, cls) {\r\n  if (!el || !cls) return\r\n  const classes = cls.split(' ')\r\n  let curClass = ' ' + el.className + ' '\r\n  for (let i = 0, j = classes.length; i < j; i++) {\r\n    let clsName = classes[i]\r\n    if (!clsName) continue\r\n    if (el.classList) {\r\n      el.classList.remove(clsName)\r\n    } else if (hasClass(el, clsName)) {\r\n      curClass = curClass.replace(' ' + clsName + ' ', ' ')\r\n    }\r\n  }\r\n  if (!el.classList) {\r\n    el.className = trim(curClass)\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function getStyle (element, styleName) {\r\n  if (!element || !styleName) return null\r\n  styleName = camelCase(styleName)\r\n  if (styleName === 'float') {\r\n    styleName = 'cssFloat'\r\n  }\r\n  try {\r\n    const computed = document.defaultView.getComputedStyle(element, '')\r\n    return element.style[styleName] || computed ? computed[styleName] : null\r\n  } catch (e) {\r\n    return element.style[styleName]\r\n  }\r\n}\r\n\r\n/* istanbul ignore next */\r\nexport function setStyle (element, styleName, value) {\r\n  if (!element || !styleName) return\r\n  if (typeof styleName === 'object') {\r\n    for (var prop in styleName) {\r\n      if (styleName.hasOwnProperty(prop)) {\r\n        setStyle(element, prop, styleName[prop])\r\n      }\r\n    }\r\n  } else {\r\n    styleName = camelCase(styleName)\r\n    if (styleName === 'opacity') {\r\n      element.style.filter = isNaN(value) ? '' : 'alpha(opacity=' + value * 100 + ')'\r\n    } else {\r\n      element.style[styleName] = value\r\n    }\r\n  }\r\n}\r\n","import { Map, Overlay } from 'ol'\r\nimport { DragPan as $DragPan } from 'ol/interaction'\r\nimport autosize from 'autosize'\r\nimport { DEF_TEXT_STYEL } from '../../Constants'\r\nimport { merge, bindAll } from '../../Utils/utils'\r\nimport { on, off, hasClass, setStyle, getStyle } from '../../Utils/domUtils'\r\n\r\nclass PlotTextBox extends Overlay {\r\n  constructor (options = {}) {\r\n    const [id, element, offset, stopEvent, positioning, insertFirst,\r\n      autoPan, autoPanAnimation, autoPanMargin, className] = [\r\n      options['id'], options['element'], options['offset'], options['stopEvent'],\r\n      options['positioning'], options['insertFirst'], options['autoPan'],\r\n      options['autoPanAnimation'], options['autoPanMargin'],\r\n      (options['className'] ? options['className'] : 'ol-plot-text-editor')\r\n    ]\r\n    super({\r\n      id,\r\n      element,\r\n      stopEvent,\r\n      insertFirst,\r\n      autoPan,\r\n      autoPanAnimation,\r\n      autoPanMargin,\r\n      className\r\n    })\r\n    this.setOffset(offset !== undefined ? offset : [0, 0])\r\n    this.setPositioning(positioning !== undefined ? positioning : 'center-center')\r\n\r\n    /**\r\n     * 地图交互\r\n     * @type {undefined}\r\n     */\r\n    this.mapDragPan = undefined\r\n\r\n    /**\r\n     * is click\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.isClick_ = false\r\n\r\n    /**\r\n     * 是否处于拖拽状态\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.dragging_ = false\r\n\r\n    /**\r\n     * 当前气泡是否获取焦点\r\n     * @type {boolean}\r\n     * @private\r\n     */\r\n    this.isFocus_ = false\r\n\r\n    /**\r\n     * 当前配置信息\r\n     * @type {{}}\r\n     * @private\r\n     */\r\n    this.options_ = options\r\n\r\n    /**\r\n     * 当前气泡位置\r\n     * @type {Array}\r\n     * @private\r\n     */\r\n    this._position = (options['position'] && options['position'].length > 0) ? options['position'] : []\r\n\r\n    /**\r\n     * 防抖延时\r\n     * @type {null}\r\n     * @private\r\n     */\r\n    this.handleTimer_ = null\r\n\r\n    /**\r\n     * 每次鼠标按下的位置\r\n     * @type {Array}\r\n     * @private\r\n     */\r\n    this.currentPixel_ = []\r\n\r\n    bindAll([\r\n      'handleFocus_',\r\n      'handleBlur_',\r\n      'handleClick_',\r\n      'handleDragStart_',\r\n      'handleDragEnd_',\r\n      'handleDragDrag_',\r\n      'closeCurrentPlotText',\r\n      'handleResizeMouseDown_',\r\n      'handleResizeMouseMove_',\r\n      'handleResizeMouseUp_',\r\n      'resizeButtonMoveHandler_'\r\n    ], this)\r\n\r\n    /**\r\n     * 创建text content\r\n     */\r\n    this.createTextContent(options)\r\n  }\r\n\r\n  /**\r\n   * 创建文本框父容器\r\n   * @param options\r\n   */\r\n  createTextContent (options) {\r\n    const _className = options.className || 'ol-plot-text-editor'\r\n    const content = document.createElement('textarea')\r\n    content.className = _className\r\n    content.style.width = options['width'] + 'px'\r\n    content.style.height = options['height'] + 'px'\r\n    content.style.minHeight = options['minHeight'] + 'px'\r\n    content.setAttribute('id', options['id'])\r\n    content.setAttribute('autofocus', true)\r\n    autosize(content)\r\n    on(content, 'focus', this.handleFocus_)\r\n    on(content, 'blur', this.handleBlur_)\r\n    on(content, 'click', this.handleClick_)\r\n    on(content, 'mousedown', this.handleDragStart_)\r\n    on(window, 'mouseup', this.handleDragEnd_)\r\n    this.set('isPlotText', true)\r\n    this.setElement(content)\r\n    this.createCloseButton(options)\r\n    this.createResizeButton(options)\r\n    this.setPosition(this._position)\r\n    this.dispatchEvent('textBoxDrawEnd', {\r\n      overlay: this,\r\n      element: content,\r\n      uuid: options['id']\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 获取文本框\r\n   * @returns {string}\r\n   * @private\r\n   */\r\n  getTextAreaFromContent_ () {\r\n    let _node = ''\r\n    const childrens_ = Array.prototype.slice.call((this.element && this.element.children), 0)\r\n    if (childrens_.length > 0) {\r\n      childrens_.every(ele => {\r\n        if (ele.nodeType === 1 && ele.nodeName.toLowerCase() === 'textarea') {\r\n          _node = ele\r\n          return false\r\n        } else {\r\n          return true\r\n        }\r\n      })\r\n    }\r\n    return _node\r\n  }\r\n\r\n  /**\r\n   * 创建关闭按钮\r\n   * @param options\r\n   */\r\n  createCloseButton (options) {\r\n    const _closeSpan = document.createElement('span')\r\n    _closeSpan.className = 'ol-plot-text-editor-close'\r\n    _closeSpan.setAttribute('data-id', options['id'])\r\n    off(_closeSpan, 'click', this.closeCurrentPlotText)\r\n    on(_closeSpan, 'click', this.closeCurrentPlotText)\r\n    this.element.appendChild(_closeSpan)\r\n  }\r\n\r\n  /**\r\n   * 创建文本框大小调整按钮\r\n   * @param options\r\n   */\r\n  createResizeButton (options) {\r\n    const _resizeSpan = document.createElement('span')\r\n    _resizeSpan.className = 'ol-plot-text-editor-resize'\r\n    _resizeSpan.setAttribute('data-id', options['id'])\r\n    off(_resizeSpan, 'mousedown', this.handleResizeMouseDown_)\r\n    off(_resizeSpan, 'mousemove', this.handleResizeMouseMove_)\r\n    on(_resizeSpan, 'mousedown', this.handleResizeMouseDown_)\r\n    on(_resizeSpan, 'mousemove', this.handleResizeMouseMove_)\r\n    this.element.appendChild(_resizeSpan)\r\n  }\r\n\r\n  /**\r\n   * 调整大小\r\n   * @param event\r\n   * @private\r\n   */\r\n  resizeButtonMoveHandler_ (event) {\r\n    const pixel_ = event.pixel\r\n    const element_ = this.getTextAreaFromContent_()\r\n    if (pixel_.length < 1 || this.currentPixel_.length < 1 || !element_) return\r\n    const _offset = [pixel_[0] - this.currentPixel_[0], pixel_[1] - this.currentPixel_[1]]\r\n    const _size = [element_.offsetWidth, element_.offsetHeight]\r\n    const _width = _size[0] + _offset[0] * 2\r\n    const _height = _size[1] + _offset[1] * 2\r\n    setStyle(element_, 'width', _width + 'px')\r\n    setStyle(element_, 'height', _height + 'px')\r\n    this.currentPixel_ = pixel_\r\n    this.getMap().render()\r\n  }\r\n\r\n  /**\r\n   * 处理移动事件\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleResizeMouseMove_ (event) {\r\n    event.stopImmediatePropagation()\r\n  }\r\n\r\n  /**\r\n   * 处理鼠标按下事件\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleResizeMouseDown_ (event) {\r\n    if (!this.getMap()) return\r\n    this.currentPixel_ = [event.x, event.y]\r\n    this.getMap().on('pointermove', this.resizeButtonMoveHandler_)\r\n    on(this.getMap().getViewport(), 'mouseup', this.handleResizeMouseUp_)\r\n  }\r\n\r\n  /**\r\n   * 处理鼠标抬起事件，移除所有事件监听\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleResizeMouseUp_ (event) {\r\n    if (!this.getMap()) return\r\n    this.getMap().un('pointermove', this.resizeButtonMoveHandler_)\r\n    off(this.getMap().getViewport(), 'mouseup', this.handleResizeMouseUp_)\r\n    this.currentPixel_ = []\r\n  }\r\n\r\n  /**\r\n   * 处理关闭事件\r\n   * @param event\r\n   */\r\n  closeCurrentPlotText (event) {\r\n    if (!this.getMap()) return\r\n    if (event && hasClass(event.target, 'ol-plot-text-editor-close')) {\r\n      let _id = event.target.getAttribute('data-id')\r\n      if (_id) {\r\n        const _overlay = this.getMap().getOverlayById(_id)\r\n        if (_overlay) {\r\n          this.getMap().removeOverlay(_overlay)\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理获取焦点事件\r\n   * @private\r\n   */\r\n  handleFocus_ () {\r\n    this.isFocus_ = true\r\n    if (this.getMap()) {\r\n      this.getMap().set('activeTextArea', this)\r\n      this.getMap().dispatchEvent('activeTextArea')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理失去焦点事件\r\n   * @private\r\n   */\r\n  handleBlur_ () {\r\n    this.isFocus_ = false\r\n    if (this.getMap()) {\r\n      this.getMap().set('activeTextArea', null)\r\n      this.getMap().set('disActiveTextArea', this)\r\n      this.getMap().dispatchEvent('disActiveTextArea')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理拖拽开始\r\n   * @private\r\n   */\r\n  handleDragStart_ (event) {\r\n    if (!this.getMap()) return\r\n    if (!this.dragging_ && this.isMoveModel() && this.isFocus_) {\r\n      this.handleTimer_ = window.setTimeout(() => {\r\n        window.clearTimeout(this.handleTimer_)\r\n        this.handleTimer_ = null\r\n        if (!this.isClick_) {\r\n          this.dragging_ = true\r\n          this.disableMapDragPan()\r\n          this.preCursor_ = this.element.style.cursor\r\n          on(this.getMap().getViewport(), 'mousemove', this.handleDragDrag_)\r\n          on(this.element, 'mouseup', this.handleDragEnd_)\r\n        }\r\n      }, 300)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理拖拽\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleDragDrag_ (event) {\r\n    if (this.dragging_) {\r\n      this.element.style.cursor = 'move'\r\n      this._position = this.getMap().getCoordinateFromPixel([event.clientX, event.clientY])\r\n      this.setPosition(this._position)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理拖拽\r\n   * @private\r\n   */\r\n  handleDragEnd_ (event) {\r\n    this.isClick_ = false\r\n    window.clearTimeout(this.handleTimer_)\r\n    this.handleTimer_ = null\r\n    if (this.dragging_ && this.isFocus_) {\r\n      this.dragging_ = false\r\n      this.enableMapDragPan()\r\n      this.element.style.cursor = this.preCursor_\r\n      off(this.getMap().getViewport(), 'mousemove', this.handleDragDrag_)\r\n      off(this.element, 'mouseup', this.handleDragEnd_)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理点击事件\r\n   * @param event\r\n   * @private\r\n   */\r\n  handleClick_ (event) {\r\n    if (event.target === this.element) {\r\n      this.isClick_ = true\r\n    } else {\r\n      this.isClick_ = false\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 是否处于选择模式\r\n   * @returns {boolean}\r\n   */\r\n  isMoveModel () {\r\n    const range = window.getSelection().getRangeAt(0)\r\n    return range.collapsed\r\n  }\r\n\r\n  /**\r\n   * 设置样式\r\n   * @param style\r\n   */\r\n  setStyle (style = {}) {\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      for (let key in style) {\r\n        if (style[key]) {\r\n          setStyle(_element, key, style[key])\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前样式\r\n   * @returns {CSSStyleDeclaration}\r\n   */\r\n  getStyle () {\r\n    const _style = {}\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      for (let key in DEF_TEXT_STYEL) {\r\n        _style[key] = getStyle(_element, key)\r\n      }\r\n    }\r\n    return _style\r\n  }\r\n\r\n  /**\r\n   * set value\r\n   * @param value\r\n   */\r\n  setValue (value) {\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      _element.value = value\r\n      if (value) {\r\n        autosize.update(_element)\r\n      }\r\n      this.getMap().render()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get value\r\n   * @returns {*}\r\n   */\r\n  getValue () {\r\n    const _element = this.getTextAreaFromContent_()\r\n    if (_element) {\r\n      return _element.value\r\n    } else {\r\n      return ''\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取宽度\r\n   * @returns {number}\r\n   */\r\n  getWidth () {\r\n    const element_ = this.getTextAreaFromContent_()\r\n    if (element_ && element_.offsetWidth) {\r\n      return element_.offsetWidth\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取高度\r\n   * @returns {number}\r\n   */\r\n  getHeight () {\r\n    const element_ = this.getTextAreaFromContent_()\r\n    if (element_ && element_.offsetHeight) {\r\n      return element_.offsetHeight\r\n    } else {\r\n      return 0\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 激活地图的拖拽平移\r\n   */\r\n  enableMapDragPan () {\r\n    const _map = this.getMap()\r\n    if (!_map) return\r\n    if (this.mapDragPan && this.mapDragPan instanceof $DragPan) {\r\n      _map.addInteraction(this.mapDragPan)\r\n      delete this.mapDragPan\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 禁止地图的拖拽平移\r\n   */\r\n  disableMapDragPan () {\r\n    const _map = this.getMap()\r\n    if (!_map) return\r\n    let interactions = _map.getInteractions().getArray()\r\n    interactions.every(item => {\r\n      if (item instanceof $DragPan) {\r\n        this.mapDragPan = item\r\n        _map.removeInteraction(item)\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * set map\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    super.setMap(map)\r\n    if (map && map instanceof Map) {\r\n      this.setStyle(merge(DEF_TEXT_STYEL, this.options_['style']))\r\n      this.setValue(this.options_['value'])\r\n    }\r\n  }\r\n}\r\n\r\nexport default PlotTextBox\r\n","/**\r\n * Created by FDD on 2017/5/20.\r\n */\r\nconst TEXTAREA = 'TextArea' // 文本标绘（特殊）\r\nconst ARC = 'Arc'\r\nconst CURVE = 'Curve'\r\nconst GATHERING_PLACE = 'GatheringPlace'\r\nconst POLYLINE = 'Polyline'\r\nconst FREEHANDLINE = 'FreeHandLine'\r\nconst POINT = 'Point'\r\nconst PENNANT = 'Pennant'\r\nconst RECTANGLE = 'RectAngle'\r\nconst CIRCLE = 'Circle'\r\nconst ELLIPSE = 'Ellipse'\r\nconst LUNE = 'Lune'\r\nconst SECTOR = 'Sector'\r\nconst CLOSED_CURVE = 'ClosedCurve'\r\nconst POLYGON = 'Polygon'\r\nconst FREE_POLYGON = 'FreePolygon'\r\nconst ATTACK_ARROW = 'AttackArrow'\r\nconst DOUBLE_ARROW = 'DoubleArrow'\r\nconst STRAIGHT_ARROW = 'StraightArrow'\r\nconst FINE_ARROW = 'FineArrow'\r\nconst ASSAULT_DIRECTION = 'AssaultDirection'\r\nconst TAILED_ATTACK_ARROW = 'TailedAttackArrow'\r\nconst SQUAD_COMBAT = 'SquadCombat'\r\nconst TAILED_SQUAD_COMBAT = 'TailedSquadCombat'\r\nconst RECTFLAG = 'RectFlag'\r\nconst TRIANGLEFLAG = 'TriangleFlag'\r\nconst CURVEFLAG = 'CurveFlag'\r\nexport {\r\n  TEXTAREA,\r\n  ARC,\r\n  CURVE,\r\n  GATHERING_PLACE,\r\n  POLYLINE,\r\n  FREEHANDLINE,\r\n  POINT,\r\n  PENNANT,\r\n  RECTANGLE,\r\n  CIRCLE,\r\n  ELLIPSE,\r\n  LUNE,\r\n  SECTOR,\r\n  CLOSED_CURVE,\r\n  POLYGON,\r\n  FREE_POLYGON,\r\n  ATTACK_ARROW,\r\n  DOUBLE_ARROW,\r\n  STRAIGHT_ARROW,\r\n  FINE_ARROW,\r\n  ASSAULT_DIRECTION,\r\n  TAILED_SQUAD_COMBAT,\r\n  TAILED_ATTACK_ARROW,\r\n  SQUAD_COMBAT,\r\n  RECTFLAG,\r\n  TRIANGLEFLAG,\r\n  CURVEFLAG\r\n}\r\n","/**\r\n * Created by FDD on 2017/5/15.\r\n * @desc 点要素\r\n */\r\nimport { Map } from 'ol'\r\nimport { Point as $Point } from 'ol/geom'\r\nimport { POINT } from '../../Utils/PlotTypes'\r\nclass Point extends $Point {\r\n  constructor (coordinates, point, params) {\r\n    super([])\r\n    this.type = POINT\r\n    this.options = params || {}\r\n    this.set('params', this.options)\r\n    this.fixPointCount = 1\r\n    if (point && point.length > 0) {\r\n      this.setPoints(point)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    let pnt = this.points[0]\r\n    this.setCoordinates(pnt)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Point\r\n","/**\r\n * Created by FDD on 2017/5/15.\r\n * @desc 点要素\r\n */\r\nimport { Map } from 'ol'\r\nimport { Point } from 'ol/geom'\r\nimport { PENNANT } from '../../Utils/PlotTypes'\r\nclass Pennant extends Point {\r\n  constructor (coordinates, point, params) {\r\n    super([])\r\n    this.type = PENNANT\r\n    this.options = params || {}\r\n    this.set('params', this.options)\r\n    if (point && point.length > 0) {\r\n      this.setPoints(point)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    this.setCoordinates(this.points)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Pennant\r\n","import { Map } from 'ol'\r\nimport { LineString } from 'ol/geom'\r\n\r\nimport { POLYLINE } from '../../Utils/PlotTypes'\r\nclass Polyline extends LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = POLYLINE\r\n    this.freehand = false\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    this.setCoordinates(this.points)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Polyline\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘画弓形算法，继承线要素相关方法和属性\r\n */\r\nimport { Map } from 'ol'\r\nimport { LineString } from 'ol/geom'\r\nimport { ARC } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Arc extends LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = ARC\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) return\r\n    if (count === 2) {\r\n      this.setCoordinates(this.points)\r\n    } else {\r\n      let [pnt1, pnt2, pnt3, startAngle, endAngle] = [this.points[0], this.points[1], this.points[2], null, null]\r\n      let center = PlotUtils.getCircleCenterOfThreePoints(pnt1, pnt2, pnt3)\r\n      let radius = PlotUtils.MathDistance(pnt1, center)\r\n      let angle1 = PlotUtils.getAzimuth(pnt1, center)\r\n      let angle2 = PlotUtils.getAzimuth(pnt2, center)\r\n      if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n        startAngle = angle2\r\n        endAngle = angle1\r\n      } else {\r\n        startAngle = angle1\r\n        endAngle = angle2\r\n      }\r\n      this.setCoordinates(PlotUtils.getArcPoints(center, radius, startAngle, endAngle))\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Arc\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘画圆算法，继承面要素相关方法和属性\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { CIRCLE } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Circle extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CIRCLE\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      let center = this.points[0]\r\n      let radius = PlotUtils.MathDistance(center, this.points[1])\r\n      this.setCoordinates([this.generatePoints(center, radius)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对圆边线进行插值\r\n   * @param center\r\n   * @param radius\r\n   * @returns {null}\r\n   */\r\n  generatePoints (center, radius) {\r\n    let [x, y, angle, points] = [null, null, null, []]\r\n    for (let i = 0; i <= 100; i++) {\r\n      angle = Math.PI * 2 * i / 100\r\n      x = center[0] + radius * Math.cos(angle)\r\n      y = center[1] + radius * Math.sin(angle)\r\n      points.push([x, y])\r\n    }\r\n    return points\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Circle\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘曲线算法\r\n */\r\nimport { Map } from 'ol'\r\nimport { LineString } from 'ol/geom'\r\nimport { CURVE } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Curve extends LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CURVE\r\n    this.t = 0.3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else if (count === 2) {\r\n      this.setCoordinates(this.points)\r\n    } else {\r\n      let points = PlotUtils.getCurvePoints(this.t, this.points)\r\n      this.setCoordinates(points)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Curve\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 自由线\r\n * @Inherits ol.geom.LineString\r\n */\r\nimport { Map } from 'ol'\r\nimport { LineString } from 'ol/geom'\r\nimport { FREEHANDLINE } from '../../Utils/PlotTypes'\r\nclass FreeHandLine extends LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = FREEHANDLINE\r\n    this.freehand = true\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    this.setCoordinates(this.points)\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default FreeHandLine\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 规则矩形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon as $Polygon } from 'ol/geom'\r\nimport { fromExtent } from 'ol/geom/Polygon'\r\nimport { boundingExtent } from 'ol/extent.js'\r\nimport { RECTANGLE } from '../../Utils/PlotTypes'\r\nclass RectAngle extends $Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = RECTANGLE\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    this.isFill = ((params['isFill'] === false) ? params['isFill'] : true)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    if (this.points.length === 2) {\r\n      let coordinates = []\r\n      if (this.isFill) {\r\n        let extent = boundingExtent(this.points)\r\n        let polygon = fromExtent(extent)\r\n        coordinates = polygon.getCoordinates()\r\n      } else {\r\n        let start = this.points[0]\r\n        let end = this.points[1]\r\n        coordinates = [start, [start[0], end[1]], end, [end[0], start[1]], start]\r\n      }\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default RectAngle\r\n","/**\r\n * Created by FDD on 2017/5/22.\r\n * @desc 标绘画圆算法，继承面要素相关方法和属性\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\n\r\nimport { ELLIPSE } from '../../Utils/PlotTypes'\r\nimport * as Constants from '../../Constants'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Ellipse extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = ELLIPSE\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  generate () {\r\n    if (this.getPointCount() < 2) {\r\n      return false\r\n    } else {\r\n      let [pnt1, pnt2] = [this.points[0], this.points[1]]\r\n      let center = PlotUtils.Mid(pnt1, pnt2)\r\n      let majorRadius = Math.abs((pnt1[0] - pnt2[0]) / 2)\r\n      let minorRadius = Math.abs((pnt1[1] - pnt2[1]) / 2)\r\n      let res = this.generatePoints(center, majorRadius, minorRadius)\r\n      this.setCoordinates([res])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对圆边线进行插值\r\n   * @param center\r\n   * @param majorRadius\r\n   * @param minorRadius\r\n   * @returns {*}\r\n   */\r\n  generatePoints (center, majorRadius, minorRadius) {\r\n    let [x, y, angle, points] = [null, null, null, []]\r\n    for (let i = 0; i <= Constants.FITTING_COUNT; i++) {\r\n      angle = Math.PI * 2 * i / Constants.FITTING_COUNT\r\n      x = center[0] + majorRadius * Math.cos(angle)\r\n      y = center[1] + minorRadius * Math.sin(angle)\r\n      points.push([x, y])\r\n    }\r\n    return points\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Ellipse\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 弓形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { LUNE } from '../../Utils/PlotTypes'\r\nimport * as Constants from '../../Constants'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Lune extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = LUNE\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    if (this.getPointCount() < 2) {\r\n      return false\r\n    } else {\r\n      let pnts = this.getPoints()\r\n      if (this.getPointCount() === 2) {\r\n        let mid = PlotUtils.Mid(pnts[0], pnts[1])\r\n        let d = PlotUtils.MathDistance(pnts[0], mid)\r\n        let pnt = PlotUtils.getThirdPoint(pnts[0], mid, Constants.HALF_PI, d)\r\n        pnts.push(pnt)\r\n      }\r\n      let [pnt1, pnt2, pnt3, startAngle, endAngle] = [pnts[0], pnts[1], pnts[2], undefined, undefined]\r\n      let center = PlotUtils.getCircleCenterOfThreePoints(pnt1, pnt2, pnt3)\r\n      let radius = PlotUtils.MathDistance(pnt1, center)\r\n      let angle1 = PlotUtils.getAzimuth(pnt1, center)\r\n      let angle2 = PlotUtils.getAzimuth(pnt2, center)\r\n      if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n        startAngle = angle2\r\n        endAngle = angle1\r\n      } else {\r\n        startAngle = angle1\r\n        endAngle = angle2\r\n      }\r\n      pnts = PlotUtils.getArcPoints(center, radius, startAngle, endAngle)\r\n      pnts.push(pnts[0])\r\n      this.setCoordinates([pnts])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Lune\r\n","/**\r\n * Created by FDD on 2017/5/25.\r\n * @desc 扇形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon as $Polygon } from 'ol/geom'\r\nimport { SECTOR } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass Sector extends $Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = SECTOR\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let points = this.getPointCount()\r\n    if (points < 2) {\r\n      return false\r\n    } else if (points === 2) {\r\n      this.setCoordinates([this.points])\r\n    } else {\r\n      let pnts = this.getPoints()\r\n      let [center, pnt2, pnt3] = [pnts[0], pnts[1], pnts[2]]\r\n      let radius = PlotUtils.MathDistance(pnt2, center)\r\n      let startAngle = PlotUtils.getAzimuth(pnt2, center)\r\n      let endAngle = PlotUtils.getAzimuth(pnt3, center)\r\n      let pList = PlotUtils.getArcPoints(center, radius, startAngle, endAngle)\r\n      pList.push(center, pList[0])\r\n      this.setCoordinates([pList])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Sector\r\n","/**\r\n * Created by FDD on 2017/5/25.\r\n * @desc 闭合曲面\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { CLOSED_CURVE } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass ClosedCurve extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CLOSED_CURVE\r\n    this.t = 0.3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let points = this.getPointCount()\r\n    if (points < 2) {\r\n      return false\r\n    } else if (points === 2) {\r\n      this.setCoordinates([this.points])\r\n    } else {\r\n      let pnts = this.getPoints()\r\n      pnts.push(pnts[0], pnts[1])\r\n      let [normals, pList] = [[], []]\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        let normalPoints = PlotUtils.getBisectorNormals(this.t, pnts[i], pnts[i + 1], pnts[i + 2])\r\n        normals = normals.concat(normalPoints)\r\n      }\r\n      let count = normals.length\r\n      normals = [normals[count - 1]].concat(normals.slice(0, count - 1))\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        let pnt1 = pnts[i]\r\n        let pnt2 = pnts[i + 1]\r\n        pList.push(pnt1)\r\n        for (let t = 0; t <= Constants.FITTING_COUNT; t++) {\r\n          let pnt = PlotUtils.getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i * 2], normals[i * 2 + 1], pnt2)\r\n          pList.push(pnt)\r\n        }\r\n        pList.push(pnt2)\r\n      }\r\n      this.setCoordinates([pList])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default ClosedCurve\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 多边形\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon as $Polygon } from 'ol/geom'\r\nimport { POLYGON } from '../../Utils/PlotTypes'\r\nclass Polygon extends $Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = POLYGON\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.points])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default Polygon\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 自由面\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { FREE_POLYGON } from '../../Utils/PlotTypes'\r\nclass FreePolygon extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = FREE_POLYGON\r\n    this.freehand = true\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    this.setCoordinates([this.points])\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default FreePolygon\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 进攻方向\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { ATTACK_ARROW } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass AttackArrow extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = ATTACK_ARROW\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.headTailFactor = 0.8\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let points = this.getPointCount()\r\n      if (points < 2) {\r\n        return false\r\n      } else if (points === 2) {\r\n        this.setCoordinates([this.points])\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [tailLeft, tailRight] = [pnts[0], pnts[1]]\r\n        if (PlotUtils.isClockWise(pnts[0], pnts[1], pnts[2])) {\r\n          tailLeft = pnts[1]\r\n          tailRight = pnts[0]\r\n        }\r\n        let midTail = PlotUtils.Mid(tailLeft, tailRight)\r\n        let bonePnts = [midTail].concat(pnts.slice(2))\r\n        let headPnts = this.getArrowHeadPoints(bonePnts, tailLeft, tailRight)\r\n        let [neckLeft, neckRight] = [headPnts[0], headPnts[4]]\r\n        let tailWidthFactor = PlotUtils.MathDistance(tailLeft, tailRight) / PlotUtils.getBaseLength(bonePnts)\r\n        let bodyPnts = this.getArrowBodyPoints(bonePnts, neckLeft, neckRight, tailWidthFactor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailLeft].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailRight].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse())])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值箭形上的点\r\n   * @param pnt1\r\n   * @param pnt2\r\n   * @param pnt3\r\n   * @param clockWise\r\n   * @returns {Array.<T>}\r\n   */\r\n  getArrowPoints (pnt1, pnt2, pnt3, clockWise) {\r\n    let midPnt = PlotUtils.Mid(pnt1, pnt2)\r\n    let len = PlotUtils.MathDistance(midPnt, pnt3)\r\n    let midPnt1 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.3, true)\r\n    let midPnt2 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.5, true)\r\n    midPnt1 = PlotUtils.getThirdPoint(midPnt, midPnt1, Constants.HALF_PI, len / 5, clockWise)\r\n    midPnt2 = PlotUtils.getThirdPoint(midPnt, midPnt2, Constants.HALF_PI, len / 4, clockWise)\r\n    let points = [midPnt, midPnt1, midPnt2, pnt3]\r\n    let arrowPnts = this.getArrowHeadPoints(points)\r\n    if (arrowPnts && Array.isArray(arrowPnts) && arrowPnts.length > 0) {\r\n      let [neckLeftPoint, neckRightPoint] = [arrowPnts[0], arrowPnts[4]]\r\n      let tailWidthFactor = PlotUtils.MathDistance(pnt1, pnt2) / PlotUtils.getBaseLength(points) / 2\r\n      let bodyPnts = this.getArrowBodyPoints(points, neckLeftPoint, neckRightPoint, tailWidthFactor)\r\n      if (bodyPnts) {\r\n        let n = bodyPnts.length\r\n        let lPoints = bodyPnts.slice(0, n / 2)\r\n        let rPoints = bodyPnts.slice(n / 2, n)\r\n        lPoints.push(neckLeftPoint)\r\n        rPoints.push(neckRightPoint)\r\n        lPoints = lPoints.reverse()\r\n        lPoints.push(pnt2)\r\n        rPoints = rPoints.reverse()\r\n        rPoints.push(pnt1)\r\n        return (lPoints.reverse().concat(arrowPnts, rPoints))\r\n      }\r\n    } else {\r\n      throw new Error('插值出错')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值头部点\r\n   * @param points\r\n   * @returns {[*,*,*,*,*]}\r\n   */\r\n  getArrowHeadPoints (points, tailLeft, tailRight) {\r\n    try {\r\n      let len = PlotUtils.getBaseLength(points)\r\n      let headHeight = len * this.headHeightFactor\r\n      let headPnt = points[points.length - 1]\r\n      len = PlotUtils.MathDistance(headPnt, points[points.length - 2])\r\n      let tailWidth = PlotUtils.MathDistance(tailLeft, tailRight)\r\n      if (headHeight > tailWidth * this.headTailFactor) {\r\n        headHeight = tailWidth * this.headTailFactor\r\n      }\r\n      let headWidth = headHeight * this.headWidthFactor\r\n      let neckWidth = headHeight * this.neckWidthFactor\r\n      headHeight = headHeight > len ? len : headHeight\r\n      let neckHeight = headHeight * this.neckHeightFactor\r\n      let headEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, headHeight, true)\r\n      let neckEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, neckHeight, true)\r\n      let headLeft = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, false)\r\n      let headRight = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, true)\r\n      let neckLeft = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, false)\r\n      let neckRight = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, true)\r\n      return [neckLeft, headLeft, headPnt, headRight, neckRight]\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值面部分数据\r\n   * @param points\r\n   * @param neckLeft\r\n   * @param neckRight\r\n   * @param tailWidthFactor\r\n   * @returns {Array.<*>}\r\n   */\r\n  getArrowBodyPoints (points, neckLeft, neckRight, tailWidthFactor) {\r\n    let allLen = PlotUtils.wholeDistance(points)\r\n    let len = PlotUtils.getBaseLength(points)\r\n    let tailWidth = len * tailWidthFactor\r\n    let neckWidth = PlotUtils.MathDistance(neckLeft, neckRight)\r\n    let widthDif = (tailWidth - neckWidth) / 2\r\n    let [tempLen, leftBodyPnts, rightBodyPnts] = [0, [], []]\r\n    for (let i = 1; i < points.length - 1; i++) {\r\n      let angle = PlotUtils.getAngleOfThreePoints(points[i - 1], points[i], points[i + 1]) / 2\r\n      tempLen += PlotUtils.MathDistance(points[i - 1], points[i])\r\n      let w = (tailWidth / 2 - tempLen / allLen * widthDif) / Math.sin(angle)\r\n      let left = PlotUtils.getThirdPoint(points[i - 1], points[i], Math.PI - angle, w, true)\r\n      let right = PlotUtils.getThirdPoint(points[i - 1], points[i], angle, w, false)\r\n      leftBodyPnts.push(left)\r\n      rightBodyPnts.push(right)\r\n    }\r\n    return leftBodyPnts.concat(rightBodyPnts)\r\n  }\r\n\r\n  /**\r\n   * 获取对称点\r\n   * @param linePnt1\r\n   * @param linePnt2\r\n   * @param point\r\n   * @returns {*}\r\n   */\r\n  getTempPoint4 (linePnt1, linePnt2, point) {\r\n    try {\r\n      let midPnt = PlotUtils.Mid(linePnt1, linePnt2)\r\n      let len = PlotUtils.MathDistance(midPnt, point)\r\n      let angle = PlotUtils.getAngleOfThreePoints(linePnt1, midPnt, point)\r\n      let [symPnt, distance1, distance2, mid] = [undefined, undefined, undefined, undefined]\r\n      if (angle < Constants.HALF_PI) {\r\n        distance1 = len * Math.sin(angle)\r\n        distance2 = len * Math.cos(angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else if (angle >= Constants.HALF_PI && angle < Math.PI) {\r\n        distance1 = len * Math.sin(Math.PI - angle)\r\n        distance2 = len * Math.cos(Math.PI - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      } else if (angle >= Math.PI && angle < Math.PI * 1.5) {\r\n        distance1 = len * Math.sin(angle - Math.PI)\r\n        distance2 = len * Math.cos(angle - Math.PI)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else {\r\n        distance1 = len * Math.sin(Math.PI * 2 - angle)\r\n        distance2 = len * Math.cos(Math.PI * 2 - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      }\r\n      return symPnt\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {ol.Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default AttackArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 双箭头\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { DOUBLE_ARROW } from '../../Utils/PlotTypes'\r\nimport * as Constants from '../../Constants'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass DoubleArrow extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = DOUBLE_ARROW\r\n    this.headHeightFactor = 0.25\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.connPoint = null\r\n    this.tempPoint4 = null\r\n    this.fixPointCount = 4\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else if (count === 2) {\r\n        this.setCoordinates([this.points])\r\n        return false\r\n      }\r\n      if (count > 2) {\r\n        let [pnt1, pnt2, pnt3] = [this.points[0], this.points[1], this.points[2]]\r\n        if (count === 3) {\r\n          this.tempPoint4 = this.getTempPoint4(pnt1, pnt2, pnt3)\r\n          this.connPoint = PlotUtils.Mid(pnt1, pnt2)\r\n        } else if (count === 4) {\r\n          this.tempPoint4 = this.points[3]\r\n          this.connPoint = PlotUtils.Mid(pnt1, pnt2)\r\n        } else {\r\n          this.tempPoint4 = this.points[3]\r\n          this.connPoint = this.points[4]\r\n        }\r\n        let [leftArrowPnts, rightArrowPnts] = [undefined, undefined]\r\n        if (PlotUtils.isClockWise(pnt1, pnt2, pnt3)) {\r\n          leftArrowPnts = this.getArrowPoints(pnt1, this.connPoint, this.tempPoint4, false)\r\n          rightArrowPnts = this.getArrowPoints(this.connPoint, pnt2, pnt3, true)\r\n        } else {\r\n          leftArrowPnts = this.getArrowPoints(pnt2, this.connPoint, pnt3, false)\r\n          rightArrowPnts = this.getArrowPoints(this.connPoint, pnt1, this.tempPoint4, true)\r\n        }\r\n        let m = leftArrowPnts.length\r\n        let t = (m - 5) / 2\r\n        let llBodyPnts = leftArrowPnts.slice(0, t)\r\n        let lArrowPnts = leftArrowPnts.slice(t, t + 5)\r\n        let lrBodyPnts = leftArrowPnts.slice(t + 5, m)\r\n        let rlBodyPnts = rightArrowPnts.slice(0, t)\r\n        let rArrowPnts = rightArrowPnts.slice(t, t + 5)\r\n        let rrBodyPnts = rightArrowPnts.slice(t + 5, m)\r\n        rlBodyPnts = PlotUtils.getBezierPoints(rlBodyPnts)\r\n        let bodyPnts = PlotUtils.getBezierPoints(rrBodyPnts.concat(llBodyPnts.slice(1)))\r\n        lrBodyPnts = PlotUtils.getBezierPoints(lrBodyPnts)\r\n        let pnts = rlBodyPnts.concat(rArrowPnts, bodyPnts, lArrowPnts, lrBodyPnts)\r\n        this.setCoordinates([pnts])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值箭形上的点\r\n   * @param pnt1\r\n   * @param pnt2\r\n   * @param pnt3\r\n   * @param clockWise\r\n   * @returns {Array.<T>}\r\n   */\r\n  getArrowPoints (pnt1, pnt2, pnt3, clockWise) {\r\n    let midPnt = PlotUtils.Mid(pnt1, pnt2)\r\n    let len = PlotUtils.MathDistance(midPnt, pnt3)\r\n    let midPnt1 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.3, true)\r\n    let midPnt2 = PlotUtils.getThirdPoint(pnt3, midPnt, 0, len * 0.5, true)\r\n    midPnt1 = PlotUtils.getThirdPoint(midPnt, midPnt1, Constants.HALF_PI, len / 5, clockWise)\r\n    midPnt2 = PlotUtils.getThirdPoint(midPnt, midPnt2, Constants.HALF_PI, len / 4, clockWise)\r\n    let points = [midPnt, midPnt1, midPnt2, pnt3]\r\n    let arrowPnts = this.getArrowHeadPoints(points)\r\n    if (arrowPnts && Array.isArray(arrowPnts) && arrowPnts.length > 0) {\r\n      let [neckLeftPoint, neckRightPoint] = [arrowPnts[0], arrowPnts[4]]\r\n      let tailWidthFactor = PlotUtils.MathDistance(pnt1, pnt2) / PlotUtils.getBaseLength(points) / 2\r\n      let bodyPnts = this.getArrowBodyPoints(points, neckLeftPoint, neckRightPoint, tailWidthFactor)\r\n      if (bodyPnts) {\r\n        let n = bodyPnts.length\r\n        let lPoints = bodyPnts.slice(0, n / 2)\r\n        let rPoints = bodyPnts.slice(n / 2, n)\r\n        lPoints.push(neckLeftPoint)\r\n        rPoints.push(neckRightPoint)\r\n        lPoints = lPoints.reverse()\r\n        lPoints.push(pnt2)\r\n        rPoints = rPoints.reverse()\r\n        rPoints.push(pnt1)\r\n        return (lPoints.reverse().concat(arrowPnts, rPoints))\r\n      }\r\n    } else {\r\n      throw new Error('插值出错')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值头部点\r\n   * @param points\r\n   * @returns {[*,*,*,*,*]}\r\n   */\r\n  getArrowHeadPoints (points) {\r\n    try {\r\n      let len = PlotUtils.getBaseLength(points)\r\n      let headHeight = len * this.headHeightFactor\r\n      let headPnt = points[points.length - 1]\r\n      let headWidth = headHeight * this.headWidthFactor\r\n      let neckWidth = headHeight * this.neckWidthFactor\r\n      let neckHeight = headHeight * this.neckHeightFactor\r\n      let headEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, headHeight, true)\r\n      let neckEndPnt = PlotUtils.getThirdPoint(points[points.length - 2], headPnt, 0, neckHeight, true)\r\n      let headLeft = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, false)\r\n      let headRight = PlotUtils.getThirdPoint(headPnt, headEndPnt, Constants.HALF_PI, headWidth, true)\r\n      let neckLeft = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, false)\r\n      let neckRight = PlotUtils.getThirdPoint(headPnt, neckEndPnt, Constants.HALF_PI, neckWidth, true)\r\n      return [neckLeft, headLeft, headPnt, headRight, neckRight]\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值面部分数据\r\n   * @param points\r\n   * @param neckLeft\r\n   * @param neckRight\r\n   * @param tailWidthFactor\r\n   * @returns {Array.<*>}\r\n   */\r\n  getArrowBodyPoints (points, neckLeft, neckRight, tailWidthFactor) {\r\n    let allLen = PlotUtils.wholeDistance(points)\r\n    let len = PlotUtils.getBaseLength(points)\r\n    let tailWidth = len * tailWidthFactor\r\n    let neckWidth = PlotUtils.MathDistance(neckLeft, neckRight)\r\n    let widthDif = (tailWidth - neckWidth) / 2\r\n    let [tempLen, leftBodyPnts, rightBodyPnts] = [0, [], []]\r\n    for (let i = 1; i < points.length - 1; i++) {\r\n      let angle = PlotUtils.getAngleOfThreePoints(points[i - 1], points[i], points[i + 1]) / 2\r\n      tempLen += PlotUtils.MathDistance(points[i - 1], points[i])\r\n      let w = (tailWidth / 2 - tempLen / allLen * widthDif) / Math.sin(angle)\r\n      let left = PlotUtils.getThirdPoint(points[i - 1], points[i], Math.PI - angle, w, true)\r\n      let right = PlotUtils.getThirdPoint(points[i - 1], points[i], angle, w, false)\r\n      leftBodyPnts.push(left)\r\n      rightBodyPnts.push(right)\r\n    }\r\n    return leftBodyPnts.concat(rightBodyPnts)\r\n  }\r\n\r\n  /**\r\n   * 获取对称点\r\n   * @param linePnt1\r\n   * @param linePnt2\r\n   * @param point\r\n   * @returns {*}\r\n   */\r\n  getTempPoint4 (linePnt1, linePnt2, point) {\r\n    try {\r\n      let midPnt = PlotUtils.Mid(linePnt1, linePnt2)\r\n      let len = PlotUtils.MathDistance(midPnt, point)\r\n      let angle = PlotUtils.getAngleOfThreePoints(linePnt1, midPnt, point)\r\n      let [symPnt, distance1, distance2, mid] = [undefined, undefined, undefined, undefined]\r\n      if (angle < Constants.HALF_PI) {\r\n        distance1 = len * Math.sin(angle)\r\n        distance2 = len * Math.cos(angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else if (angle >= Constants.HALF_PI && angle < Math.PI) {\r\n        distance1 = len * Math.sin(Math.PI - angle)\r\n        distance2 = len * Math.cos(Math.PI - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, false)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      } else if (angle >= Math.PI && angle < Math.PI * 1.5) {\r\n        distance1 = len * Math.sin(angle - Math.PI)\r\n        distance2 = len * Math.cos(angle - Math.PI)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, true)\r\n      } else {\r\n        distance1 = len * Math.sin(Math.PI * 2 - angle)\r\n        distance2 = len * Math.cos(Math.PI * 2 - angle)\r\n        mid = PlotUtils.getThirdPoint(linePnt1, midPnt, Constants.HALF_PI, distance1, true)\r\n        symPnt = PlotUtils.getThirdPoint(midPnt, mid, Constants.HALF_PI, distance2, false)\r\n      }\r\n      return symPnt\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n    if (this.getPointCount() === 3 && this.tempPoint4 !== null) {\r\n      this.points.push(this.tempPoint4)\r\n    }\r\n    if (this.connPoint !== null) {\r\n      this.points.push(this.connPoint)\r\n    }\r\n  }\r\n}\r\n\r\nexport default DoubleArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 细直箭头\r\n */\r\nimport { Map } from 'ol'\r\nimport { LineString } from 'ol/geom'\r\nimport { STRAIGHT_ARROW } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass StraightArrow extends LineString {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = STRAIGHT_ARROW\r\n    this.fixPointCount = 2\r\n    this.maxArrowLength = 3000000\r\n    this.arrowLengthScale = 5\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [pnt1, pnt2] = [pnts[0], pnts[1]]\r\n        let distance = PlotUtils.MathDistance(pnt1, pnt2)\r\n        let len = distance / this.arrowLengthScale\r\n        len = ((len > this.maxArrowLength) ? this.maxArrowLength : len)\r\n        let leftPnt = PlotUtils.getThirdPoint(pnt1, pnt2, Math.PI / 6, len, false)\r\n        let rightPnt = PlotUtils.getThirdPoint(pnt1, pnt2, Math.PI / 6, len, true)\r\n        this.setCoordinates([pnt1, pnt2, leftPnt, pnt2, rightPnt])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {{}|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default StraightArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 粗单尖头箭头\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { FINE_ARROW } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass FineArrow extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = FINE_ARROW\r\n    this.tailWidthFactor = 0.1\r\n    this.neckWidthFactor = 0.2\r\n    this.headWidthFactor = 0.25\r\n    this.headAngle = Math.PI / 8.5\r\n    this.neckAngle = Math.PI / 13\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let cont = this.getPointCount()\r\n      if (cont < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [pnt1, pnt2] = [pnts[0], pnts[1]]\r\n        let len = PlotUtils.getBaseLength(pnts)\r\n        let tailWidth = len * this.tailWidthFactor\r\n        let neckWidth = len * this.neckWidthFactor\r\n        let headWidth = len * this.headWidthFactor\r\n        let tailLeft = PlotUtils.getThirdPoint(pnt2, pnt1, Constants.HALF_PI, tailWidth, true)\r\n        let tailRight = PlotUtils.getThirdPoint(pnt2, pnt1, Constants.HALF_PI, tailWidth, false)\r\n        let headLeft = PlotUtils.getThirdPoint(pnt1, pnt2, this.headAngle, headWidth, false)\r\n        let headRight = PlotUtils.getThirdPoint(pnt1, pnt2, this.headAngle, headWidth, true)\r\n        let neckLeft = PlotUtils.getThirdPoint(pnt1, pnt2, this.neckAngle, neckWidth, false)\r\n        let neckRight = PlotUtils.getThirdPoint(pnt1, pnt2, this.neckAngle, neckWidth, true)\r\n        let pList = [tailLeft, neckLeft, headLeft, pnt2, headRight, neckRight, tailRight]\r\n        this.setCoordinates([pList])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default FineArrow\r\n","/**\r\n * Created by FDD on 2017/5/24.\r\n * @desc 粗单直箭头\r\n * @Inherits FineArrow\r\n */\r\nimport FineArrow from './FineArrow'\r\nimport { ASSAULT_DIRECTION } from '../../Utils/PlotTypes'\r\nclass AssaultDirection extends FineArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.tailWidthFactor = 0.05\r\n    this.neckWidthFactor = 0.1\r\n    this.headWidthFactor = 0.15\r\n    this.type = ASSAULT_DIRECTION\r\n    this.headAngle = Math.PI / 4\r\n    this.neckAngle = Math.PI * 0.17741\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n    this.set('params', params)\r\n  }\r\n}\r\n\r\nexport default AssaultDirection\r\n","/**\r\n * Created by FDD on 2017/5/26.\r\n * @desc 进攻方向（尾）\r\n * @Inherits AttackArrow\r\n */\r\n\r\nimport { TAILED_ATTACK_ARROW } from '../../Utils/PlotTypes'\r\nimport AttackArrow from './AttackArrow'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nclass TailedAttackArrow extends AttackArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.type = TAILED_ATTACK_ARROW\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.tailWidthFactor = 0.1\r\n    this.headTailFactor = 0.8\r\n    this.swallowTailFactor = 1\r\n    this.swallowTailPnt = null\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let points = this.getPointCount()\r\n      if (points < 2) {\r\n        return false\r\n      } else if (points === 2) {\r\n        this.setCoordinates([this.points])\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let [tailLeft, tailRight] = [pnts[0], pnts[1]]\r\n        if (PlotUtils.isClockWise(pnts[0], pnts[1], pnts[2])) {\r\n          tailLeft = pnts[1]\r\n          tailRight = pnts[0]\r\n        }\r\n        let midTail = PlotUtils.Mid(tailLeft, tailRight)\r\n        let bonePnts = [midTail].concat(pnts.slice(2))\r\n        let headPnts = this.getArrowHeadPoints(bonePnts, tailLeft, tailRight)\r\n        let [neckLeft, neckRight] = [headPnts[0], headPnts[4]]\r\n        let tailWidth = PlotUtils.MathDistance(tailLeft, tailRight)\r\n        let allLen = PlotUtils.getBaseLength(bonePnts)\r\n        let len = allLen * this.tailWidthFactor * this.swallowTailFactor\r\n        this.swallowTailPnt = PlotUtils.getThirdPoint(bonePnts[1], bonePnts[0], 0, len, true)\r\n        let factor = tailWidth / allLen\r\n        let bodyPnts = this.getArrowBodyPoints(bonePnts, neckLeft, neckRight, factor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailLeft].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailRight].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse(), [this.swallowTailPnt, leftPnts[0]])])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n}\r\n\r\nexport default TailedAttackArrow\r\n","/**\r\n * Created by FDD on 2017/5/26.\r\n * @desc 分队战斗行动\r\n * @Inherits AttackArrow\r\n */\r\n\r\nimport { SQUAD_COMBAT } from '../../Utils/PlotTypes'\r\nimport AttackArrow from './AttackArrow'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass SquadCombat extends AttackArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.type = SQUAD_COMBAT\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.tailWidthFactor = 0.1\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let tailPnts = this.getTailPoints(pnts)\r\n        let headPnts = this.getArrowHeadPoints(pnts, tailPnts[0], tailPnts[1])\r\n        let neckLeft = headPnts[0]\r\n        let neckRight = headPnts[4]\r\n        let bodyPnts = this.getArrowBodyPoints(pnts, neckLeft, neckRight, this.tailWidthFactor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailPnts[0]].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailPnts[1]].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse())])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  getTailPoints (points) {\r\n    let allLen = PlotUtils.getBaseLength(points)\r\n    let tailWidth = allLen * this.tailWidthFactor\r\n    let tailLeft = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, false)\r\n    let tailRight = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, true)\r\n    return ([tailLeft, tailRight])\r\n  }\r\n}\r\n\r\nexport default SquadCombat\r\n","/**\r\n * Created by FDD on 2017/5/26.\r\n * @desc 分队战斗行动（尾）\r\n * @Inherits AttackArrow\r\n */\r\n\r\nimport { TAILED_SQUAD_COMBAT } from '../../Utils/PlotTypes'\r\nimport AttackArrow from './AttackArrow'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass TailedSquadCombat extends AttackArrow {\r\n  constructor (coordinates, points, params) {\r\n    super(coordinates, points, params)\r\n    this.type = TAILED_SQUAD_COMBAT\r\n    this.headHeightFactor = 0.18\r\n    this.headWidthFactor = 0.3\r\n    this.neckHeightFactor = 0.85\r\n    this.neckWidthFactor = 0.15\r\n    this.tailWidthFactor = 0.1\r\n    this.swallowTailFactor = 1\r\n    this.swallowTailPnt = null\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    try {\r\n      let count = this.getPointCount()\r\n      if (count < 2) {\r\n        return false\r\n      } else {\r\n        let pnts = this.getPoints()\r\n        let tailPnts = this.getTailPoints(pnts)\r\n        let headPnts = this.getArrowHeadPoints(pnts, tailPnts[0], tailPnts[2])\r\n        let neckLeft = headPnts[0]\r\n        let neckRight = headPnts[4]\r\n        let bodyPnts = this.getArrowBodyPoints(pnts, neckLeft, neckRight, this.tailWidthFactor)\r\n        let count = bodyPnts.length\r\n        let leftPnts = [tailPnts[0]].concat(bodyPnts.slice(0, count / 2))\r\n        leftPnts.push(neckLeft)\r\n        let rightPnts = [tailPnts[2]].concat(bodyPnts.slice(count / 2, count))\r\n        rightPnts.push(neckRight)\r\n        leftPnts = PlotUtils.getQBSplinePoints(leftPnts)\r\n        rightPnts = PlotUtils.getQBSplinePoints(rightPnts)\r\n        this.setCoordinates([leftPnts.concat(headPnts, rightPnts.reverse(), [tailPnts[1], leftPnts[0]])])\r\n      }\r\n    } catch (e) {\r\n      console.log(e)\r\n    }\r\n  }\r\n\r\n  getTailPoints (points) {\r\n    let allLen = PlotUtils.getBaseLength(points)\r\n    let tailWidth = allLen * this.tailWidthFactor\r\n    let tailLeft = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, false)\r\n    let tailRight = PlotUtils.getThirdPoint(points[1], points[0], Constants.HALF_PI, tailWidth, true)\r\n    let len = tailWidth * this.swallowTailFactor\r\n    let swallowTailPnt = PlotUtils.getThirdPoint(points[1], points[0], 0, len, true)\r\n    return ([tailLeft, swallowTailPnt, tailRight])\r\n  }\r\n}\r\n\r\nexport default TailedSquadCombat\r\n","/**\r\n * Created by FDD on 2017/5/27.\r\n * @desc 集结地\r\n * @Inherits ol.geom.Polygon\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { GATHERING_PLACE } from '../../Utils/PlotTypes'\r\nimport * as PlotUtils from '../../Utils/utils'\r\nimport * as Constants from '../../Constants'\r\nclass GatheringPlace extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = GATHERING_PLACE\r\n    this.t = 0.4\r\n    this.fixPointCount = 3\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let pnts = this.getPoints()\r\n    let points = this.getPointCount()\r\n    if (pnts.length < 2) {\r\n      return false\r\n    } else {\r\n      if (points === 2) {\r\n        let mid = PlotUtils.Mid(pnts[0], pnts[1])\r\n        let d = PlotUtils.MathDistance(pnts[0], mid) / 0.9\r\n        let pnt = PlotUtils.getThirdPoint(pnts[0], mid, Constants.HALF_PI, d, true)\r\n        pnts = [pnts[0], pnt, pnts[1]]\r\n      }\r\n      let mid = PlotUtils.Mid(pnts[0], pnts[2])\r\n      pnts.push(mid, pnts[0], pnts[1])\r\n      let [normals, pnt1, pnt2, pnt3, pList] = [[], undefined, undefined, undefined, []]\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        pnt1 = pnts[i]\r\n        pnt2 = pnts[i + 1]\r\n        pnt3 = pnts[i + 2]\r\n        let normalPoints = PlotUtils.getBisectorNormals(this.t, pnt1, pnt2, pnt3)\r\n        normals = normals.concat(normalPoints)\r\n      }\r\n      let count = normals.length\r\n      normals = [normals[count - 1]].concat(normals.slice(0, count - 1))\r\n      for (let i = 0; i < pnts.length - 2; i++) {\r\n        pnt1 = pnts[i]\r\n        pnt2 = pnts[i + 1]\r\n        pList.push(pnt1)\r\n        for (let t = 0; t <= Constants.FITTING_COUNT; t++) {\r\n          let pnt = PlotUtils.getCubicValue(t / Constants.FITTING_COUNT, pnt1, normals[i * 2], normals[i * 2 + 1], pnt2)\r\n          pList.push(pnt)\r\n        }\r\n        pList.push(pnt2)\r\n      }\r\n      this.setCoordinates([pList])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default GatheringPlace\r\n","/**\r\n * Created by FDD on 2017/9/13.\r\n * @desc 直角旗标（使用两个控制点直接创建直角旗标）\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { RECTFLAG } from '../../Utils/PlotTypes'\r\nclass RectFlag extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = RECTFLAG\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.calculatePonits(this.points)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值点数据\r\n   * @param points\r\n   * @returns {Array}\r\n   */\r\n  calculatePonits (points) {\r\n    let components = []\r\n    // 至少需要两个控制点\r\n    if (points.length > 1) {\r\n      // 取第一个\r\n      let startPoint = points[0]\r\n      // 取最后一个\r\n      let endPoint = points[points.length - 1]\r\n      var point1 = [endPoint[0], startPoint[1]]\r\n      var point2 = [endPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point3 = [startPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point4 = [startPoint[0], endPoint[1]]\r\n      components = [startPoint, point1, point2, point3, point4]\r\n    }\r\n    return components\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default RectFlag\r\n","/**\r\n * Created by FDD on 2017/9/13.\r\n * @desc 三角旗标（使用两个控制点直接创建三角旗标）\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\n\r\nimport { TRIANGLEFLAG } from '../../Utils/PlotTypes'\r\nclass TriangleFlag extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = TRIANGLEFLAG\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.calculatePonits(this.points)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值点数据\r\n   * @param points\r\n   * @returns {Array}\r\n   */\r\n  calculatePonits (points) {\r\n    let components = []\r\n    // 至少需要两个控制点\r\n    if (points.length > 1) {\r\n      // 取第一个\r\n      let startPoint = points[0]\r\n      // 取最后一个\r\n      let endPoint = points[points.length - 1]\r\n      var point1 = [endPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point2 = [startPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      var point3 = [startPoint[0], endPoint[1]]\r\n      components = [startPoint, point1, point2, point3]\r\n    }\r\n    return components\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default TriangleFlag\r\n","/**\r\n * Created by FDD on 2017/9/13.\r\n * @desc 曲线旗标\r\n */\r\nimport { Map } from 'ol'\r\nimport { Polygon } from 'ol/geom'\r\nimport { CURVEFLAG } from '../../Utils/PlotTypes'\r\nimport { getBezierPoints } from '../../Utils/utils'\r\nclass CurveFlag extends Polygon {\r\n  constructor (coordinates, points, params) {\r\n    super([])\r\n    this.type = CURVEFLAG\r\n    this.fixPointCount = 2\r\n    this.set('params', params)\r\n    if (points && points.length > 0) {\r\n      this.setPoints(points)\r\n    } else if (coordinates && coordinates.length > 0) {\r\n      this.setCoordinates(coordinates)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取标绘类型\r\n   * @returns {*}\r\n   */\r\n  getPlotType () {\r\n    return this.type\r\n  }\r\n\r\n  /**\r\n   * 执行动作\r\n   */\r\n  generate () {\r\n    let count = this.getPointCount()\r\n    if (count < 2) {\r\n      return false\r\n    } else {\r\n      this.setCoordinates([this.calculatePonits(this.points)])\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 插值点数据\r\n   * @param points\r\n   * @returns {Array}\r\n   */\r\n  calculatePonits (points) {\r\n    let components = []\r\n    // 至少需要两个控制点\r\n    if (points.length > 1) {\r\n      // 取第一个\r\n      let startPoint = points[0]\r\n      // 取最后一个\r\n      let endPoint = points[points.length - 1]\r\n      // 上曲线起始点\r\n      let point1 = startPoint\r\n      // 上曲线第一控制点\r\n      let point2 = [(endPoint[0] - startPoint[0]) / 4 + startPoint[0], (endPoint[1] - startPoint[1]) / 8 + startPoint[1]]\r\n      // 上曲线第二个点\r\n      let point3 = [(startPoint[0] + endPoint[0]) / 2, startPoint[1]]\r\n      // 上曲线第二控制点\r\n      let point4 = [(endPoint[0] - startPoint[0]) * 3 / 4 + startPoint[0], -(endPoint[1] - startPoint[1]) / 8 + startPoint[1]]\r\n      // 上曲线结束点\r\n      let point5 = [endPoint[0], startPoint[1]]\r\n      // 下曲线结束点\r\n      let point6 = [endPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      // 下曲线第二控制点\r\n      let point7 = [(endPoint[0] - startPoint[0]) * 3 / 4 + startPoint[0], (endPoint[1] - startPoint[1]) * 3 / 8 + startPoint[1]]\r\n      // 下曲线第二个点\r\n      let point8 = [(startPoint[0] + endPoint[0]) / 2, (startPoint[1] + endPoint[1]) / 2]\r\n      // 下曲线第一控制点\r\n      let point9 = [(endPoint[0] - startPoint[0]) / 4 + startPoint[0], (endPoint[1] - startPoint[1]) * 5 / 8 + startPoint[1]]\r\n      // 下曲线起始点\r\n      let point10 = [startPoint[0], (startPoint[1] + endPoint[1]) / 2]\r\n      // 旗杆底部点\r\n      let point11 = [startPoint[0], endPoint[1]]\r\n      // 计算上曲线\r\n      let curve1 = getBezierPoints([point1, point2, point3, point4, point5])\r\n      // 计算下曲线\r\n      let curve2 = getBezierPoints([point6, point7, point8, point9, point10])\r\n      // 合并\r\n      components = curve1.concat(curve2)\r\n      components.push(point11)\r\n    }\r\n    return components\r\n  }\r\n\r\n  /**\r\n   * 设置地图对象\r\n   * @param map\r\n   */\r\n  setMap (map) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取当前地图对象\r\n   * @returns {Map|*}\r\n   */\r\n  getMap () {\r\n    return this.map\r\n  }\r\n\r\n  /**\r\n   * 判断是否是Plot\r\n   * @returns {boolean}\r\n   */\r\n  isPlot () {\r\n    return true\r\n  }\r\n\r\n  /**\r\n   * 设置坐标点\r\n   * @param value\r\n   */\r\n  setPoints (value) {\r\n    this.points = !value ? [] : value\r\n    if (this.points.length >= 1) {\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取坐标点\r\n   * @returns {Array.<T>}\r\n   */\r\n  getPoints () {\r\n    return this.points.slice(0)\r\n  }\r\n\r\n  /**\r\n   * 获取点数量\r\n   * @returns {Number}\r\n   */\r\n  getPointCount () {\r\n    return this.points.length\r\n  }\r\n\r\n  /**\r\n   * 更新当前坐标\r\n   * @param point\r\n   * @param index\r\n   */\r\n  updatePoint (point, index) {\r\n    if (index >= 0 && index < this.points.length) {\r\n      this.points[index] = point\r\n      this.generate()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 更新最后一个坐标\r\n   * @param point\r\n   */\r\n  updateLastPoint (point) {\r\n    this.updatePoint(point, this.points.length - 1)\r\n  }\r\n\r\n  /**\r\n   * 结束绘制\r\n   */\r\n  finishDrawing () {\r\n  }\r\n}\r\n\r\nexport default CurveFlag\r\n","/**\r\n * Created by FDD on 2017/5/15.\r\n * @desc PlotDraw\r\n */\r\nimport { Map } from 'ol'\r\nimport { Draw as $DrawInteraction, DoubleClickZoom } from 'ol/interaction'\r\nimport {\r\n  Style as $Style,\r\n  Icon as $Icon,\r\n  Stroke as $Stroke,\r\n  Fill as $Fill\r\n} from 'ol/style'\r\n\r\nimport Feature from 'ol/Feature'\r\nimport { createBox } from 'ol/interaction/Draw'\r\n\r\nimport Observable from 'observable-emit'\r\nimport { getuuid, MathDistance, bindAll } from '../Utils/utils'\r\nimport { BASE_LAYERNAME } from '../Constants'\r\nimport { createVectorLayer } from '../Utils/layerUtils'\r\nimport PlotTextBox from '../Geometry/Text/PlotTextBox'\r\nimport * as Plots from '../Geometry/index'\r\nimport * as PlotTypes from '../Utils/PlotTypes'\r\n\r\nclass PlotDraw extends Observable {\r\n  constructor (map, params) {\r\n    super()\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n    this.options = params || {}\r\n    /**\r\n     * 交互点\r\n     * @type {null}\r\n     */\r\n    this.points = null\r\n    /**\r\n     * 当前标绘工具\r\n     * @type {null}\r\n     */\r\n    this.plot = null\r\n    /**\r\n     * 当前要素\r\n     * @type {null}\r\n     */\r\n    this.feature = null\r\n    /**\r\n     * 标绘类型\r\n     * @type {null}\r\n     */\r\n    this.plotType = null\r\n    /**\r\n     * 当前标绘参数\r\n     * @type {null}\r\n     */\r\n    this.plotParams = null\r\n    /**\r\n     * 当前地图视图\r\n     * @type {Element}\r\n     */\r\n    this.mapViewport = this.map.getViewport()\r\n    /**\r\n     * 地图双击交互\r\n     * @type {null}\r\n     */\r\n    this.dblClickZoomInteraction = null\r\n\r\n    /**\r\n     * draw交互工具\r\n     * @type {null}\r\n     * @private\r\n     */\r\n    this.drawInteraction_ = null\r\n\r\n    /**\r\n     * 创建图层名称\r\n     * @type {string}\r\n     */\r\n    this.layerName = ((this.options && this.options['layerName']) ? this.options['layerName'] : BASE_LAYERNAME)\r\n\r\n    bindAll([\r\n      'textAreaDrawEnd',\r\n      'mapFirstClickHandler',\r\n      'mapNextClickHandler',\r\n      'mapDoubleClickHandler',\r\n      'mapMouseMoveHandler'\r\n    ], this)\r\n\r\n    /**\r\n     * 当前矢量图层\r\n     * @type {*}\r\n     */\r\n    this.drawLayer = createVectorLayer(this.map, this.layerName, {\r\n      create: true\r\n    })\r\n    this.drawLayer.setZIndex(this.options['zIndex'] || 99)\r\n  }\r\n\r\n  /**\r\n   * 创建Plot\r\n   * @param type\r\n   * @param points\r\n   * @param _params\r\n   * @returns {*}\r\n   */\r\n  createPlot (type, points, _params) {\r\n    let params = _params || {}\r\n    switch (type) {\r\n      case PlotTypes.TEXTAREA:\r\n        return 'TextArea'\r\n      case PlotTypes.POINT:\r\n        return new Plots.Point([], points, params)\r\n      case PlotTypes.PENNANT:\r\n        return new Plots.Pennant([], points, params)\r\n      case PlotTypes.POLYLINE:\r\n        return new Plots.Polyline([], points, params)\r\n      case PlotTypes.ARC:\r\n        return new Plots.Arc([], points, params)\r\n      case PlotTypes.CIRCLE:\r\n        return new Plots.Circle([], points, params)\r\n      case PlotTypes.CURVE:\r\n        return new Plots.Curve([], points, params)\r\n      case PlotTypes.FREEHANDLINE:\r\n        return new Plots.FreeHandLine([], points, params)\r\n      case PlotTypes.RECTANGLE:\r\n        return new Plots.RectAngle([], points, params)\r\n      case PlotTypes.ELLIPSE:\r\n        return new Plots.Ellipse([], points, params)\r\n      case PlotTypes.LUNE:\r\n        return new Plots.Lune([], points, params)\r\n      case PlotTypes.SECTOR:\r\n        return new Plots.Sector([], points, params)\r\n      case PlotTypes.CLOSED_CURVE:\r\n        return new Plots.ClosedCurve([], points, params)\r\n      case PlotTypes.POLYGON:\r\n        return new Plots.Polygon([], points, params)\r\n      case PlotTypes.ATTACK_ARROW:\r\n        return new Plots.AttackArrow([], points, params)\r\n      case PlotTypes.FREE_POLYGON:\r\n        return new Plots.FreePolygon([], points, params)\r\n      case PlotTypes.DOUBLE_ARROW:\r\n        return new Plots.DoubleArrow([], points, params)\r\n      case PlotTypes.STRAIGHT_ARROW:\r\n        return new Plots.StraightArrow([], points, params)\r\n      case PlotTypes.FINE_ARROW:\r\n        return new Plots.FineArrow([], points, params)\r\n      case PlotTypes.ASSAULT_DIRECTION:\r\n        return new Plots.AssaultDirection([], points, params)\r\n      case PlotTypes.TAILED_ATTACK_ARROW:\r\n        return new Plots.TailedAttackArrow([], points, params)\r\n      case PlotTypes.SQUAD_COMBAT:\r\n        return new Plots.SquadCombat([], points, params)\r\n      case PlotTypes.TAILED_SQUAD_COMBAT:\r\n        return new Plots.TailedSquadCombat([], points, params)\r\n      case PlotTypes.GATHERING_PLACE:\r\n        return new Plots.GatheringPlace([], points, params)\r\n      case PlotTypes.RECTFLAG:\r\n        return new Plots.RectFlag([], points, params)\r\n      case PlotTypes.TRIANGLEFLAG:\r\n        return new Plots.TriangleFlag([], points, params)\r\n      case PlotTypes.CURVEFLAG:\r\n        return new Plots.CurveFlag([], points, params)\r\n    }\r\n    return null\r\n  }\r\n\r\n  /**\r\n   * 激活工具\r\n   * @param type\r\n   * @param params\r\n   */\r\n  active (type, params = {}) {\r\n    this.disActive()\r\n    this.deactiveMapTools()\r\n    this.plotType = type\r\n    this.plotParams = params\r\n    if (type === PlotTypes.TEXTAREA) {\r\n      this.activeInteraction()\r\n    } else if (Object.keys(PlotTypes).some(key => (PlotTypes[key] === type))) {\r\n      this.map.on('click', this.mapFirstClickHandler)\r\n    } else {\r\n      console.warn('不存在的标绘类型！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 激活交互工具\r\n   */\r\n  activeInteraction () {\r\n    this.drawInteraction_ = new $DrawInteraction({\r\n      style: new $Style({\r\n        fill: new $Fill({\r\n          color: 'rgba(255, 255, 255, 0.7)'\r\n        }),\r\n        stroke: new $Stroke({\r\n          color: 'rgba(0, 0, 0, 0.15)',\r\n          width: 2\r\n        }),\r\n        image: new $Icon({\r\n          anchor: [1, 1],\r\n          anchorXUnits: 'fraction',\r\n          anchorYUnits: 'fraction',\r\n          opacity: 0.75,\r\n          src: 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAYAAAAf8/9hAAABgklEQVQ4T41T0W3CQAy1lfwRqR0h/CE5UhkBJmiZADpB0wlKJwA2aDegE5QR+Igl/noj9OPuLydXPuXQEYUKS5FyPvvd87ONRDRFxEdr7c4Y8ws3WFmW90VRvIjIF1ZVtQaANxH59N6v8zwvRaQEgCMATDu88I+Ipm1bk2XZHhEfAOAdFW00Gh2YOQafOeidHoaYEdGHc65GDZhMJuXpdDJ99hqkPmZe9e9iTgCoqmrWNM0hDerq/FGftXbcZxFzAgARrZg5vBaNiGpE3OhZRF6Zedu7DzkRYMrMKlQKYBBRQVVgw8zj3n3IGWSg9ESkds6tiqJQbe4AYJ6WGVkPAqh4+romdP9LbXMqZh/gXIKqm+d5EK9vbduOY7d0AAdL6AYLmqbRAQtGRMc4ONF/wSC2RF/PsuwbABapqLEjKqb3fq4sLtoYh6Lbiydr7TbtuwYDgH5qB9XmPEjdKG+Y+Xmo7ms+Lcs5N0uX6ei9X9y4TGtEXIZlukb7PzbdmNcisv8DtQILak2vZsYAAAAASUVORK5CYII='\r\n        })\r\n      }),\r\n      type: 'Circle',\r\n      geometryFunction: createBox()\r\n    })\r\n    this.map.addInteraction(this.drawInteraction_)\r\n    this.drawInteraction_.on('drawend', this.textAreaDrawEnd)\r\n  }\r\n\r\n  /**\r\n   * 绘制结束\r\n   * @param event\r\n   */\r\n  textAreaDrawEnd (event) {\r\n    if (event && event.feature) {\r\n      this.map.removeInteraction(this.drawInteraction_)\r\n      const extent = event.feature.getGeometry().getExtent()\r\n      const _center = [(extent[0] + extent[2]) / 2, (extent[1] + extent[3]) / 2]\r\n      const topLeft = this.map.getPixelFromCoordinate([extent[0], extent[1]])\r\n      const bottomRight = this.map.getPixelFromCoordinate([extent[2], extent[3]])\r\n      const [_width, _height] = [Math.abs(topLeft[0] - bottomRight[0]), Math.abs(topLeft[1] - bottomRight[1])]\r\n      const _plotText = new PlotTextBox({\r\n        id: getuuid(),\r\n        position: _center,\r\n        value: '',\r\n        width: _width,\r\n        height: _height,\r\n        style: {\r\n          width: _width + 'px',\r\n          height: _height + 'px'\r\n        }\r\n      })\r\n      if (this.map && this.map instanceof Map && _plotText) {\r\n        this.map.addOverlay(_plotText)\r\n      } else {\r\n        console.warn('未传入地图对象或者plotText创建失败！')\r\n      }\r\n    } else {\r\n      console.info('未获取到要素！')\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消激活状态\r\n   */\r\n  disActive () {\r\n    this.removeEventHandlers()\r\n    if (this.drawInteraction_) {\r\n      this.map.removeInteraction(this.drawInteraction_)\r\n      this.drawInteraction_ = null\r\n    }\r\n    this.points = []\r\n    this.plot = null\r\n    this.feature = null\r\n    this.plotType = null\r\n    this.plotParams = null\r\n    this.activateMapTools()\r\n  }\r\n\r\n  /**\r\n   * PLOT是否处于激活状态\r\n   * @returns {boolean}\r\n   */\r\n  isDrawing () {\r\n    return !!this.plotType\r\n  }\r\n\r\n  /**\r\n   * 地图事件处理\r\n   * 激活工具后第一次点击事件\r\n   * @param event\r\n   */\r\n  mapFirstClickHandler (event) {\r\n    this.map.un('click', this.mapFirstClickHandler)\r\n    this.points.push(event.coordinate)\r\n    this.plot = this.createPlot(this.plotType, this.points, this.plotParams)\r\n    this.feature = new Feature(this.plot)\r\n    this.feature.set('isPlot', true)\r\n    this.drawLayer.getSource().addFeature(this.feature)\r\n    if (this.plotType === PlotTypes.POINT || this.plotType === PlotTypes.PENNANT) {\r\n      this.plot.finishDrawing()\r\n      this.drawEnd(event)\r\n    } else {\r\n      this.map.on('click', this.mapNextClickHandler)\r\n      if (!this.plot.freehand) {\r\n        this.map.on('dblclick', this.mapDoubleClickHandler)\r\n      }\r\n      this.map.un('pointermove', this.mapMouseMoveHandler)\r\n      this.map.on('pointermove', this.mapMouseMoveHandler)\r\n    }\r\n    if (this.plotType && this.feature) {\r\n      this.plotParams['plotType'] = this.plotType\r\n      this.feature.setProperties(this.plotParams)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 地图点击事件处理\r\n   * @param event\r\n   * @returns {boolean}\r\n   */\r\n  mapNextClickHandler (event) {\r\n    if (!this.plot.freehand) {\r\n      if (MathDistance(event.coordinate, this.points[this.points.length - 1]) < 0.0001) {\r\n        return false\r\n      }\r\n    }\r\n    this.points.push(event.coordinate)\r\n    this.plot.setPoints(this.points)\r\n    if (this.plot.fixPointCount === this.plot.getPointCount()) {\r\n      this.mapDoubleClickHandler(event)\r\n    }\r\n    if (this.plot && this.plot.freehand) {\r\n      this.mapDoubleClickHandler(event)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 地图双击事件处理\r\n   * @param event\r\n   */\r\n  mapDoubleClickHandler (event) {\r\n    event.preventDefault()\r\n    this.plot.finishDrawing()\r\n    this.drawEnd(event)\r\n  }\r\n\r\n  /**\r\n   * 地图事件处理\r\n   * 鼠标移动事件\r\n   * @param event\r\n   * @returns {boolean}\r\n   */\r\n  mapMouseMoveHandler (event) {\r\n    let coordinate = event.coordinate\r\n    if (MathDistance(coordinate, this.points[this.points.length - 1]) < 0.0001) {\r\n      return false\r\n    }\r\n    if (!this.plot.freehand) {\r\n      let pnts = this.points.concat([coordinate])\r\n      this.plot.setPoints(pnts)\r\n    } else {\r\n      this.points.push(coordinate)\r\n      this.plot.setPoints(this.points)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 移除事件监听\r\n   */\r\n  removeEventHandlers () {\r\n    this.map.un('click', this.mapFirstClickHandler)\r\n    this.map.un('click', this.mapNextClickHandler)\r\n    this.map.un('pointermove', this.mapMouseMoveHandler)\r\n    this.map.un('dblclick', this.mapDoubleClickHandler)\r\n  }\r\n\r\n  /**\r\n   * 绘制结束\r\n   */\r\n  drawEnd (event) {\r\n    this.dispatchSync('drawEnd', {\r\n      type: 'drawEnd',\r\n      originalEvent: event,\r\n      feature: this.feature\r\n    })\r\n    if (this.feature && this.options['isClear']) {\r\n      this.drawLayer.getSource().removeFeature(this.feature)\r\n    }\r\n    this.disActive()\r\n  }\r\n\r\n  /**\r\n   * 添加要素\r\n   */\r\n  addFeature () {\r\n    this.feature = new Feature(this.plot)\r\n    if (this.feature && this.drawLayer) {\r\n      this.drawLayer.getSource().addFeature(this.feature)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 取消激活地图交互工具\r\n   */\r\n  deactiveMapTools () {\r\n    let interactions = this.map.getInteractions().getArray()\r\n    interactions.every(item => {\r\n      if (item instanceof DoubleClickZoom) {\r\n        this.dblClickZoomInteraction = item\r\n        this.map.removeInteraction(item)\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 激活已取消的地图工具\r\n   * 还原之前状态\r\n   */\r\n  activateMapTools () {\r\n    if (this.dblClickZoomInteraction && this.dblClickZoomInteraction instanceof DoubleClickZoom) {\r\n      this.map.addInteraction(this.dblClickZoomInteraction)\r\n      this.dblClickZoomInteraction = null\r\n    }\r\n  }\r\n}\r\nexport default PlotDraw\r\n","import { Map, Overlay } from 'ol'\r\nimport { DragPan } from 'ol/interaction'\r\n\r\nimport Feature from 'ol/Feature'\r\n\r\nimport Observable from 'observable-emit'\r\nimport { bindAll } from '../Utils/utils'\r\nimport * as htmlUtils from '../Utils/domUtils'\r\nimport { BASE_HELP_CONTROL_POINT_ID, BASE_HELP_HIDDEN } from '../Constants'\r\nclass PlotEdit extends Observable {\r\n  constructor (map) {\r\n    super()\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n    /**\r\n     * 当前地图容器\r\n     * @type {Element}\r\n     */\r\n    this.mapViewport = this.map.getViewport()\r\n    /**\r\n     * 激活绘制工具\r\n     * @type {null}\r\n     */\r\n    this.activePlot = null\r\n    /**\r\n     * 开始点\r\n     * @type {null}\r\n     */\r\n    this.startPoint = null\r\n    /**\r\n     * clone的控制点\r\n     * @type {null}\r\n     */\r\n    this.ghostControlPoints = null\r\n    /**\r\n     * 控制点\r\n     * @type {null}\r\n     */\r\n    this.controlPoints = null\r\n    /**\r\n     * 鼠标移入\r\n     * @type {boolean}\r\n     */\r\n    this.mouseOver = false\r\n    /**\r\n     * 元素\r\n     * @type {{}}\r\n     */\r\n    this.elementTable = {}\r\n    /**\r\n     * 当前激活的控制点的ID\r\n     * @type {null}\r\n     */\r\n    this.activeControlPointId = null\r\n    /**\r\n     * 地图拖拽交互\r\n     * @type {null}\r\n     */\r\n    this.mapDragPan = null\r\n    /**\r\n     * 未激活之前鼠标样式\r\n     * @type {null}\r\n     * @private\r\n     */\r\n    this.previousCursor_ = null\r\n\r\n    bindAll([\r\n      'controlPointMouseDownHandler',\r\n      'controlPointMouseMoveHandler2',\r\n      'controlPointMouseUpHandler',\r\n      'controlPointMouseMoveHandler',\r\n      'plotMouseOverOutHandler',\r\n      'plotMouseDownHandler',\r\n      'plotMouseUpHandler',\r\n      'plotMouseMoveHandler'\r\n    ], this)\r\n  }\r\n\r\n  /**\r\n   * 初始化提示DOM\r\n   * @returns {boolean}\r\n   */\r\n  initHelperDom () {\r\n    if (!this.map || !this.activePlot) {\r\n      return false\r\n    }\r\n    let parent = this.getMapParentElement()\r\n    if (!parent) {\r\n      return false\r\n    } else {\r\n      let hiddenDiv = htmlUtils.createHidden('div', parent, BASE_HELP_HIDDEN)\r\n      let cPnts = this.getControlPoints()\r\n      if (cPnts && Array.isArray(cPnts) && cPnts.length > 0) {\r\n        cPnts.forEach((item, index) => {\r\n          let id = BASE_HELP_CONTROL_POINT_ID + '-' + index\r\n          htmlUtils.create('div', BASE_HELP_CONTROL_POINT_ID, hiddenDiv, id)\r\n          this.elementTable[id] = index\r\n        })\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取地图元素的父元素\r\n   * @returns {*}\r\n   */\r\n  getMapParentElement () {\r\n    let mapElement = this.map.getTargetElement()\r\n    if (!mapElement) {\r\n      return false\r\n    } else {\r\n      return mapElement.parentNode\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 销毁帮助提示DOM\r\n   */\r\n  destroyHelperDom () {\r\n    if (this.controlPoints && Array.isArray(this.controlPoints) && this.controlPoints.length > 0) {\r\n      this.controlPoints.forEach((item, index) => {\r\n        if (item && item instanceof Overlay) {\r\n          this.map.removeOverlay(item)\r\n        }\r\n        let element = htmlUtils.getElement(BASE_HELP_CONTROL_POINT_ID + '-' + index)\r\n        if (element) {\r\n          htmlUtils.off(element, 'mousedown', this.controlPointMouseDownHandler.bind(this))\r\n          htmlUtils.off(element, 'mousemove', this.controlPointMouseMoveHandler2.bind(this))\r\n        }\r\n      })\r\n      this.controlPoints = []\r\n    }\r\n    let parent = this.getMapParentElement()\r\n    let hiddenDiv = htmlUtils.getElement(BASE_HELP_HIDDEN)\r\n    if (hiddenDiv && parent) {\r\n      htmlUtils.remove(hiddenDiv, parent)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 初始化要素控制点\r\n   */\r\n  initControlPoints () {\r\n    this.controlPoints = []\r\n    let cPnts = this.getControlPoints()\r\n    if (cPnts && Array.isArray(cPnts) && cPnts.length > 0) {\r\n      cPnts.forEach((item, index) => {\r\n        let id = BASE_HELP_CONTROL_POINT_ID + '-' + index\r\n        this.elementTable[id] = index\r\n        let element = htmlUtils.getElement(id)\r\n        let pnt = new Overlay({\r\n          id: id,\r\n          position: cPnts[index],\r\n          positioning: 'center-center',\r\n          element: element\r\n        })\r\n        this.controlPoints.push(pnt)\r\n        this.map.addOverlay(pnt)\r\n        this.map.render()\r\n        htmlUtils.on(element, 'mousedown', this.controlPointMouseDownHandler)\r\n        htmlUtils.on(element, 'mousemove', this.controlPointMouseMoveHandler2)\r\n      })\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对控制点的移动事件\r\n   * @param e\r\n   */\r\n  controlPointMouseMoveHandler2 (e) {\r\n    e.stopImmediatePropagation()\r\n  }\r\n\r\n  /**\r\n   * 对控制点的鼠标按下事件\r\n   * @param e\r\n   */\r\n  controlPointMouseDownHandler (e) {\r\n    this.activeControlPointId = e.target.id\r\n    this.map.on('pointermove', this.controlPointMouseMoveHandler)\r\n    htmlUtils.on(this.mapViewport, 'mouseup', this.controlPointMouseUpHandler)\r\n  }\r\n\r\n  /**\r\n   * 对控制点的移动事件\r\n   * @param event\r\n   */\r\n  controlPointMouseMoveHandler (event) {\r\n    let coordinate = event.coordinate\r\n    if (this.activeControlPointId) {\r\n      let plot = this.activePlot.getGeometry()\r\n      let index = this.elementTable[this.activeControlPointId]\r\n      plot.updatePoint(coordinate, index)\r\n      let overlay = this.map.getOverlayById(this.activeControlPointId)\r\n      if (overlay) {\r\n        overlay.setPosition(coordinate)\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 对控制点的鼠标抬起事件\r\n   * @param event\r\n   */\r\n  controlPointMouseUpHandler (event) {\r\n    this.map.un('pointermove', this.controlPointMouseMoveHandler)\r\n    htmlUtils.off(this.mapViewport, 'mouseup', this.controlPointMouseUpHandler)\r\n  }\r\n\r\n  /**\r\n   * 激活工具\r\n   * @param plot\r\n   * @returns {boolean}\r\n   */\r\n  activate (plot) {\r\n    if (plot &&\r\n      plot instanceof Feature &&\r\n      plot.get('isPlot') &&\r\n      plot.getGeometry().isPlot &&\r\n      plot !== this.activePlot) {\r\n      this.deactivate()\r\n      this.activePlot = plot\r\n      this.previousCursor_ = this.map.getTargetElement().style.cursor\r\n      window.setTimeout(() => {\r\n        this.dispatch('active_plot_change', this.activePlot)\r\n      }, 500)\r\n      this.map.on('pointermove', this.plotMouseOverOutHandler)\r\n      this.initHelperDom()\r\n      this.initControlPoints()\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取要素的控制点\r\n   * @returns {Array}\r\n   */\r\n  getControlPoints () {\r\n    let points = []\r\n    if (this.activePlot) {\r\n      let geom = this.activePlot.getGeometry()\r\n      if (geom) {\r\n        points = geom.getPoints()\r\n      }\r\n    }\r\n    return points\r\n  }\r\n\r\n  /**\r\n   * 鼠标移出要编辑的要素范围\r\n   * @param e\r\n   * @returns {T|undefined}\r\n   */\r\n  plotMouseOverOutHandler (e) {\r\n    let feature = this.map.forEachFeatureAtPixel(e.pixel, function (feature) {\r\n      return feature\r\n    })\r\n    if (feature && feature === this.activePlot) {\r\n      if (!this.mouseOver) {\r\n        this.mouseOver = true\r\n        this.map.getTargetElement().style.cursor = 'move'\r\n        this.map.on('pointerdown', this.plotMouseDownHandler)\r\n      }\r\n    } else {\r\n      if (this.mouseOver) {\r\n        this.mouseOver = false\r\n        this.map.getTargetElement().style.cursor = 'default'\r\n        this.map.un('pointerdown', this.plotMouseDownHandler)\r\n      }\r\n    }\r\n    return feature\r\n  }\r\n\r\n  /**\r\n   * 在要编辑的要素按下鼠标按键\r\n   * @param event\r\n   */\r\n  plotMouseDownHandler (event) {\r\n    this.ghostControlPoints = this.getControlPoints()\r\n    this.startPoint = event.coordinate\r\n    this.disableMapDragPan()\r\n    this.map.on('pointerup', this.plotMouseUpHandler)\r\n    this.map.on('pointerdrag', this.plotMouseMoveHandler)\r\n  }\r\n\r\n  /**\r\n   * 在要编辑的要素上移动鼠标\r\n   * @param event\r\n   */\r\n  plotMouseMoveHandler (event) {\r\n    let [deltaX, deltaY, newPoints] = [event.coordinate[0] - this.startPoint[0], event.coordinate[1] - this.startPoint[1], []]\r\n    if (this.ghostControlPoints && Array.isArray(this.ghostControlPoints) && this.ghostControlPoints.length > 0) {\r\n      for (let i = 0; i < this.ghostControlPoints.length; i++) {\r\n        let coordinate = [this.ghostControlPoints[i][0] + deltaX, this.ghostControlPoints[i][1] + deltaY]\r\n        newPoints.push(coordinate)\r\n        let id = BASE_HELP_CONTROL_POINT_ID + '-' + i\r\n        let overlay = this.map.getOverlayById(id)\r\n        if (overlay) {\r\n          overlay.setPosition(coordinate)\r\n          overlay.setPositioning('center-center')\r\n        }\r\n      }\r\n    }\r\n    const _geometry = this.activePlot.getGeometry()\r\n    _geometry.setPoints(newPoints)\r\n  }\r\n\r\n  /**\r\n   * 鼠标抬起事件\r\n   * @param event\r\n   */\r\n  plotMouseUpHandler (event) {\r\n    this.enableMapDragPan()\r\n    this.map.un('pointerup', this.plotMouseUpHandler)\r\n    this.map.un('pointerdrag', this.plotMouseMoveHandler)\r\n  }\r\n\r\n  /**\r\n   * 取消事件关联\r\n   */\r\n  disconnectEventHandlers () {\r\n    this.map.un('pointermove', this.plotMouseOverOutHandler)\r\n    this.map.un('pointermove', this.controlPointMouseMoveHandler)\r\n    htmlUtils.off(this.mapViewport, 'mouseup', this.controlPointMouseUpHandler)\r\n    this.map.un('pointerdown', this.plotMouseDownHandler)\r\n    this.map.un('pointerup', this.plotMouseUpHandler)\r\n    this.map.un('pointerdrag', this.plotMouseMoveHandler)\r\n  }\r\n\r\n  /**\r\n   * 取消激活工具\r\n   */\r\n  deactivate () {\r\n    this.activePlot = null\r\n    this.mouseOver = false\r\n    this.map.getTargetElement().style.cursor = this.previousCursor_\r\n    this.previousCursor_ = null\r\n    this.destroyHelperDom()\r\n    this.disconnectEventHandlers()\r\n    this.enableMapDragPan()\r\n    this.elementTable = {}\r\n    this.activeControlPointId = null\r\n    this.startPoint = null\r\n  }\r\n\r\n  /**\r\n   * 禁止地图的拖拽平移\r\n   */\r\n  disableMapDragPan () {\r\n    let interactions = this.map.getInteractions().getArray()\r\n    interactions.every(item => {\r\n      if (item instanceof DragPan) {\r\n        this.mapDragPan = item\r\n        this.map.removeInteraction(item)\r\n        return false\r\n      } else {\r\n        return true\r\n      }\r\n    })\r\n  }\r\n\r\n  /**\r\n   * 激活地图的拖拽平移\r\n   */\r\n  enableMapDragPan () {\r\n    if (this.mapDragPan && this.mapDragPan instanceof DragPan) {\r\n      this.map.addInteraction(this.mapDragPan)\r\n      this.mapDragPan = null\r\n    }\r\n  }\r\n}\r\nexport default PlotEdit\r\n","/**\r\n * Created by FDD on 2017/5/1.\r\n * @desc 通过json获取样式\r\n */\r\nimport {\r\n  Style, Icon, Stroke, Fill, RegularShape,\r\n  Text\r\n} from 'ol/style'\r\nimport { Geometry } from 'ol/geom'\r\n\r\nconst StyleFactory = function (options) {\r\n  let option = (options && typeof options === 'object') ? options : {}\r\n  let style = new Style({})\r\n  if (option['geometry'] && option['geometry'] instanceof Geometry) {\r\n    style.setGeometry(option['geometry'])\r\n  }\r\n  if (option['zIndex'] && typeof option['zIndex'] === 'number') {\r\n    style.setZIndex(option['zIndex'])\r\n  }\r\n  if (option['fill'] && typeof option['fill'] === 'object') {\r\n    style.setFill(this._getFill(option['fill']))\r\n  }\r\n  if (option['image'] && typeof option['image'] === 'object') {\r\n    style.setImage(this._getImage(option['image']))\r\n  }\r\n  if (option['stroke'] && typeof option['stroke'] === 'object') {\r\n    style.setStroke(this._getStroke(option['stroke']))\r\n  }\r\n  if (option['text'] && typeof option['text'] === 'object') {\r\n    style.setText(this._getText(option['text']))\r\n  }\r\n  return style\r\n}\r\n\r\n/**\r\n * 获取规则样式图形\r\n * @param options\r\n * @returns {*}\r\n * @private\r\n */\r\nStyleFactory.prototype._getRegularShape = function (options) {\r\n  try {\r\n    let regularShape = new RegularShape({\r\n      fill: (this._getFill(options['fill']) || undefined),\r\n      points: ((typeof options['points'] === 'number') ? options['points'] : 1),\r\n      radius: ((typeof options['radius'] === 'number') ? options['radius'] : undefined),\r\n      radius1: ((typeof options['radius1'] === 'number') ? options['radius1'] : undefined),\r\n      radius2: ((typeof options['radius2'] === 'number') ? options['radius2'] : undefined),\r\n      angle: ((typeof options['angle'] === 'number') ? options['angle'] : 0),\r\n      snapToPixel: ((typeof options['snapToPixel'] === 'boolean') ? options['snapToPixel'] : true),\r\n      stroke: (this._getStroke(options['stroke']) || undefined),\r\n      rotation: ((typeof options['rotation'] === 'number') ? options['rotation'] : 0),\r\n      rotateWithView: ((typeof options['rotateWithView'] === 'boolean') ? options['rotateWithView'] : false),\r\n      atlasManager: (options['atlasManager'] ? options['atlasManager'] : undefined)\r\n    })\r\n    return regularShape\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取图标样式\r\n * @param options\r\n * @returns {*}\r\n * @private\r\n */\r\nStyleFactory.prototype._getImage = function (options) {\r\n  try {\r\n    let image\r\n    options = options || {}\r\n    if (options['type'] === 'icon') {\r\n      image = this._getIcon(options['image'])\r\n    } else {\r\n      image = this._getRegularShape(options['image'])\r\n    }\r\n    return image\r\n  } catch (e) {\r\n    console.log(e)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取icon\r\n * @param options\r\n * @returns {ol.style.Icon}\r\n * @private\r\n */\r\nStyleFactory.prototype._getIcon = function (options) {\r\n  try {\r\n    options = options || {}\r\n    let icon = new Icon({\r\n      anchor: (options['imageAnchor'] ? options['imageAnchor'] : [0.5, 0.5]),\r\n      anchorXUnits: (options['imageAnchorXUnits'] ? options['imageAnchorXUnits'] : 'fraction'),\r\n      anchorYUnits: (options['imageAnchorYUnits'] ? options['imageAnchorYUnits'] : 'fraction'),\r\n      anchorOrigin: (options['imageAnchorOrigin'] ? options['imageAnchorYUnits'] : 'top-left'),\r\n      color: (options['imageColor'] ? options['imageColor'] : undefined),\r\n      crossOrigin: (options['crossOrigin'] ? options['crossOrigin'] : undefined),\r\n      img: (options['img'] ? options['img'] : undefined),\r\n      offset: (options['offset'] && Array.isArray(options['offset']) && options['offset'].length === 2 ? options['offset'] : [0, 0]),\r\n      offsetOrigin: (options['offsetOrigin'] ? options['offsetOrigin'] : 'top-left'),\r\n      scale: ((typeof options['scale'] === 'number') ? options['scale'] : 1),\r\n      snapToPixel: (typeof options['snapToPixel'] === 'boolean' ? options['snapToPixel'] : true),\r\n      rotateWithView: (typeof options['rotateWithView'] === 'boolean' ? options['rotateWithView'] : false),\r\n      opacity: (typeof options['imageOpacity'] === 'number' ? options['imageOpacity'] : 1),\r\n      rotation: (typeof options['imageRotation'] === 'number' ? options['imageRotation'] : 0),\r\n      size: (options['size'] && Array.isArray(options['size']) && options['size'].length === 2 ? options['size'] : undefined),\r\n      imgSize: (options['imgSize'] && Array.isArray(options['imgSize']) && options['imgSize'].length === 2 ? options['imgSize'] : undefined),\r\n      src: (options['imageSrc'] ? options['imageSrc'] : undefined)\r\n    })\r\n    return icon\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n/**\r\n * 获取线条样式\r\n * @param options\r\n * @returns {Stroke}\r\n * @private\r\n */\r\nStyleFactory.prototype._getStroke = function (options) {\r\n  try {\r\n    options = options || {}\r\n    let stroke = new Stroke({\r\n      color: (options['strokeColor'] ? options['strokeColor'] : undefined),\r\n      lineCap: ((options['strokeLineCap'] && typeof options['strokeLineCap'] === 'string') ? options['strokeLineCap'] : 'round'),\r\n      lineJoin: ((options['strokeLineJoin'] && typeof options['strokeLineJoin'] === 'string') ? options['strokeLineJoin'] : 'round'),\r\n      lineDash: (options['strokeLineDash'] ? options['strokeLineDash'] : undefined),\r\n      lineDashOffset: (typeof options['strokeLineDashOffset'] === 'number' ? options['strokeLineDashOffset'] : '0'),\r\n      miterLimit: (typeof options['strokeMiterLimit'] === 'number' ? options['strokeMiterLimit'] : 10),\r\n      width: (typeof options['strokeWidth'] === 'number' ? options['strokeWidth'] : undefined)\r\n    })\r\n    return stroke\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取样式文本\r\n * @param options\r\n * @returns {Text}\r\n * @private\r\n */\r\nStyleFactory.prototype._getText = function (options) {\r\n  try {\r\n    let text = new Text({\r\n      font: ((options['textFont'] && typeof options['textFont'] === 'string') ? options['textFont'] : '10px sans-serif'),\r\n      offsetX: (typeof options['textOffsetX'] === 'number' ? options['textOffsetX'] : 0),\r\n      offsetY: (typeof options['textOffsetY'] === 'number' ? options['textOffsetY'] : 0),\r\n      scale: (typeof options['textScale'] === 'number' ? options['textScale'] : undefined),\r\n      rotation: (typeof options['textRotation'] === 'number' ? options['textRotation'] : 0),\r\n      text: ((options['text'] && typeof options['text'] === 'string') ? options['text'] : undefined),\r\n      textAlign: ((options['textAlign'] && typeof options['textAlign'] === 'string') ? options['textAlign'] : 'start'),\r\n      textBaseline: ((options['textBaseline'] && typeof options['textBaseline'] === 'string') ? options['textBaseline'] : 'alphabetic'),\r\n      rotateWithView: (typeof options['rotateWithView'] === 'boolean' ? options['rotateWithView'] : false),\r\n      fill: this._getFill(options['textFill']),\r\n      stroke: this._getStroke(options['textStroke'])\r\n    })\r\n    return text\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\n/**\r\n * 获取填充颜色\r\n * @param options\r\n * @returns {Fill}\r\n * @private\r\n */\r\nStyleFactory.prototype._getFill = function (options) {\r\n  try {\r\n    options = options || {}\r\n    let fill = new Fill({\r\n      color: (options['fillColor'] ? options['fillColor'] : undefined)\r\n    })\r\n    return fill\r\n  } catch (error) {\r\n    console.log(error)\r\n  }\r\n}\r\n\r\nexport default StyleFactory\r\n","/**\r\n * Created by FDD on 2017/9/12.\r\n * @desc 标绘相关工具（包含样式修改获取和标绘保存和恢复）\r\n */\r\nimport { Map } from 'ol'\r\nimport {\r\n  Style, Icon,\r\n  RegularShape\r\n} from 'ol/style'\r\nimport { Vector as VectorLayer } from 'ol/layer'\r\nimport { Vector as VectorSource } from 'ol/source'\r\nimport { asArray, asString } from 'ol/color'\r\nimport { Point } from 'ol/geom'\r\nimport { getSize, getBottomLeft, getTopRight, buffer } from 'ol/extent'\r\n\r\nimport Feature from 'ol/Feature'\r\n\r\nimport olStyleFactory from '../Utils/factory'\r\nimport PlotTextBox from '../Geometry/Text/PlotTextBox'\r\nimport * as Geometry from '../Geometry'\r\nimport { createVectorLayer, getLayerByLayerName } from '../Utils/layerUtils'\r\nimport { BASE_LAYERNAME } from '../Constants'\r\nclass PlotUtils {\r\n  constructor (map, options) {\r\n    if (map && map instanceof Map) {\r\n      this.map = map\r\n    } else {\r\n      throw new Error('传入的不是地图对象！')\r\n    }\r\n\r\n    this.options = options\r\n    this.layerName = ((this.options && this.options['layerName']) ? this.options['layerName'] : BASE_LAYERNAME)\r\n  }\r\n\r\n  /**\r\n   * 获取样式信息\r\n   * @param feature\r\n   * @returns {boolean}\r\n   */\r\n  getBaseStyle (feature) {\r\n    let style = feature.getStyle()\r\n    if (!style) {\r\n      let layer = getLayerByLayerName(this.map, this.layerName)\r\n      if (layer && layer instanceof VectorLayer) {\r\n        style = layer.getStyle()\r\n      } else {\r\n        return false\r\n      }\r\n    }\r\n    return style\r\n  }\r\n\r\n  /**\r\n   * 设置点类型的图标样式\r\n   * @param feature\r\n   * @param image\r\n   */\r\n  setIcon (feature, image) {\r\n    try {\r\n      if (feature && feature instanceof Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let _image = this._getImage(image)\r\n        if (_image) {\r\n          tempStyle.setImage(_image)\r\n          feature.setStyle(tempStyle)\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置背景颜色\r\n   * @param feature\r\n   * @param backgroundColor\r\n   * @returns {boolean}\r\n   */\r\n  setBackgroundColor (feature, backgroundColor) {\r\n    try {\r\n      if (feature && feature instanceof Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let fill = tempStyle.getFill()\r\n        let color = fill.getColor()\r\n        if (color) {\r\n          let tempColor = asArray(color)\r\n          let _color = asArray(backgroundColor)\r\n          let currentColor = this.handleBackgroundColor(_color, tempColor[3])\r\n          fill.setColor(currentColor)\r\n          feature.setStyle(tempStyle)\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置透明度\r\n   * @param feature\r\n   * @param opacity\r\n   */\r\n  setOpacity (feature, opacity) {\r\n    try {\r\n      if (feature && feature instanceof Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        if (style) {\r\n          let tempStyle = style.clone()\r\n          let fill = tempStyle.getFill()\r\n          let color = fill.getColor()\r\n          if (color) {\r\n            let tempColor = asArray(color)\r\n            tempColor[3] = opacity\r\n            let currentColor = 'rgba(' + tempColor.join(',') + ')'\r\n            fill.setColor(currentColor)\r\n            feature.setStyle(tempStyle)\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置边框颜色\r\n   * @param feature\r\n   * @param borderColor\r\n   */\r\n  setBorderColor (feature, borderColor) {\r\n    try {\r\n      if (feature && feature instanceof Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let stroke = tempStyle.getStroke()\r\n        stroke.setColor(borderColor)\r\n        feature.setStyle(tempStyle)\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 设置边框宽度\r\n   * @param feature\r\n   * @param borderWidth\r\n   */\r\n  setBorderWidth (feature, borderWidth) {\r\n    try {\r\n      if (feature && feature instanceof Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        let tempStyle = style.clone()\r\n        let stroke = tempStyle.getStroke()\r\n        stroke.setWidth(borderWidth)\r\n        feature.setStyle(tempStyle)\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 处理背景色\r\n   * @param color\r\n   * @param opacity\r\n   * @returns {string}\r\n   */\r\n  handleBackgroundColor (color, opacity) {\r\n    try {\r\n      if (!opacity) opacity = 1\r\n      let tempColor = asArray(color)\r\n      tempColor[3] = opacity\r\n      return ('rgba(' + tempColor.join(',') + ')')\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取颜色值\r\n   * @param color\r\n   * @returns {string}\r\n   */\r\n  getColor (color) {\r\n    try {\r\n      let colorTarget = asArray(color)\r\n      return (asString(colorTarget))\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 去除无值的字段\r\n   * @param obj\r\n   * @returns {*}\r\n   */\r\n  fixObject (obj) {\r\n    if (obj && typeof obj === 'object') {\r\n      for (let key in obj) {\r\n        if (key && typeof obj[key] === 'undefined') {\r\n          delete obj[key]\r\n        }\r\n      }\r\n    }\r\n    return obj\r\n  }\r\n\r\n  /**\r\n   * 获取stroke\r\n   * @param style\r\n   * @returns {*}\r\n   */\r\n  getStroke_ (style) {\r\n    let stroke = null\r\n    if (style) {\r\n      let olStyle_ = style.getStroke()\r\n      if (olStyle_) {\r\n        stroke = {}\r\n        stroke['strokeColor'] = this.getColor(olStyle_.getColor())\r\n        stroke['strokeWidth'] = olStyle_.getWidth()\r\n        stroke['strokeLineDash'] = olStyle_.getLineDash()\r\n        stroke['lineDashOffset'] = olStyle_.getLineDashOffset()\r\n        stroke['strokeLineCap'] = olStyle_.getLineCap()\r\n        stroke['strokeLineJoin'] = olStyle_.getLineJoin()\r\n        stroke['strokeMiterLimit'] = olStyle_.getMiterLimit()\r\n      }\r\n    }\r\n    return this.fixObject(stroke)\r\n  }\r\n\r\n  /**\r\n   * 获取填充色\r\n   * @param style\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  getFill_ (style) {\r\n    let fill = null\r\n    if (style) {\r\n      let olStyle_ = style.getFill()\r\n      if (olStyle_) {\r\n        fill = {}\r\n        let color = olStyle_.getColor()\r\n        fill['fillColor'] = this.getColor(color)\r\n      }\r\n    }\r\n    return this.fixObject(fill)\r\n  }\r\n\r\n  /**\r\n   * 获取文本信息\r\n   * @param style\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  getText_ (style) {\r\n    let text = null\r\n    if (style) {\r\n      let olStyle_ = style.getText()\r\n      if (olStyle_) {\r\n        text = {}\r\n        text['textFont'] = olStyle_.getFont()\r\n        text['textOffsetX'] = olStyle_.getOffsetX()\r\n        text['textOffsetY'] = olStyle_.getOffsetY()\r\n        text['textScale'] = olStyle_.getScale()\r\n        text['textRotation'] = olStyle_.getRotation()\r\n        text['text'] = olStyle_.getText()\r\n        text['textAlign'] = olStyle_.getTextAlign()\r\n        text['textBaseline'] = olStyle_.getTextBaseline()\r\n        text['rotateWithView'] = olStyle_.getRotateWithView()\r\n        text['textFill'] = this.getFill_(olStyle_)\r\n        text['textStroke'] = this.getStroke_(olStyle_)\r\n      }\r\n    }\r\n    return this.fixObject(text)\r\n  }\r\n\r\n  /**\r\n   * 获取图像信息\r\n   * @param style\r\n   * @returns {*}\r\n   * @private\r\n   */\r\n  getImage_ (style) {\r\n    let image = null\r\n    if (style) {\r\n      let olStyle_ = style.getImage()\r\n      if (olStyle_) {\r\n        image = {}\r\n        if (olStyle_ instanceof Icon) {\r\n          image['type'] = 'icon'\r\n          image['image'] = {}\r\n          image['image']['imageAnchor'] = olStyle_.getAnchor()\r\n          image['image']['imageColor'] = olStyle_.getColor()\r\n          image['image']['imageSrc'] = olStyle_.getSrc()\r\n          image['image']['imgSize'] = olStyle_.getSize()\r\n          image['image']['scale'] = olStyle_.getScale()\r\n          image['image']['imageRotation'] = olStyle_.getRotation()\r\n          image['image']['rotateWithView'] = olStyle_.getRotateWithView()\r\n          image['image']['imageOpacity'] = olStyle_.getOpacity()\r\n          image['image']['snapToPixel'] = olStyle_.getSnapToPixel()\r\n          image['image']['offset'] = olStyle_.getOrigin()\r\n        } else if (olStyle_ instanceof RegularShape) {\r\n          image['type'] = ''\r\n          image['image'] = {}\r\n          image['image']['fill'] = this.getFill_(olStyle_)\r\n          image['image']['points'] = olStyle_.getPoints()\r\n          image['image']['radius'] = olStyle_.getRadius()\r\n          image['image']['radius2'] = olStyle_.getRadius2()\r\n          image['image']['angle'] = olStyle_.getAngle()\r\n          image['image']['stroke'] = this.getStroke_(olStyle_)\r\n          image['image']['rotateWithView'] = olStyle_.getRotateWithView()\r\n          image['image']['snapToPixel'] = olStyle_.getSnapToPixel()\r\n        }\r\n      }\r\n    }\r\n    return this.fixObject(image)\r\n  }\r\n\r\n  /**\r\n   * 获取样式配置\r\n   * @param feature\r\n   * @returns {{fill: {fillColor: string, opacity: number}, stroke: *, image: *, text: *}}\r\n   */\r\n  getStyleCode (feature) {\r\n    try {\r\n      if (feature && feature instanceof Feature) {\r\n        let style = this.getBaseStyle(feature)\r\n        if (style && style instanceof Style) {\r\n          // 填充颜色\r\n          let fill = this.getFill_(style)\r\n          let [opacity, rgbaArray, backgroundColor] = [1, null]\r\n          if (fill && fill['fillColor']) {\r\n            rgbaArray = asArray(fill['fillColor'])\r\n            opacity = parseFloat(rgbaArray[3])\r\n            if (rgbaArray && typeof opacity === 'number') {\r\n              backgroundColor = this.handleBackgroundColor(asString(rgbaArray), opacity)\r\n            }\r\n          }\r\n          // 边框线条\r\n          let stroke = this.getStroke_(style)\r\n          // 文本信息\r\n          let text = this.getText_(style)\r\n          // 获取icon\r\n          let icon = this.getImage_(style)\r\n          return {\r\n            fill: {\r\n              fillColor: backgroundColor,\r\n              opacity: opacity\r\n            },\r\n            stroke: stroke,\r\n            image: icon,\r\n            text: text\r\n          }\r\n        }\r\n      }\r\n    } catch (e) {\r\n      console.warn(e)\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 移除图层上所有的数据\r\n   */\r\n  removeAllFeatures () {\r\n    const layer = getLayerByLayerName(this.map, this.layerName)\r\n    const overlays_ = this.map.getOverlays().getArray()\r\n    if (layer) {\r\n      let source = layer.getSource()\r\n      source.clear()\r\n    }\r\n    if (overlays_ && overlays_.length > 0) {\r\n      let len = overlays_.length\r\n      for (let i = 0; i < len; i++) {\r\n        if (overlays_[i] && overlays_[i].get('isPlotText')) {\r\n          this.map.removeOverlay(overlays_[i])\r\n          i--\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * 获取所有的要素包含样式信息的GeoJSON\r\n   * @returns {Array}\r\n   */\r\n  getFeatures () {\r\n    let rFeatures = []\r\n    let layer = getLayerByLayerName(this.map, this.layerName)\r\n    if (layer) {\r\n      let source = layer.getSource()\r\n      if (source && source instanceof VectorSource) {\r\n        let features = source.getFeatures()\r\n        if (features && features.length > 0) {\r\n          features.forEach((feature, index) => {\r\n            if (feature && feature.getGeometry) {\r\n              rFeatures.push(this.jsonFeature(feature));\r\n            }\r\n          })\r\n        }\r\n      }\r\n    }\r\n    const overlays_ = this.map.getOverlays().getArray()\r\n    overlays_.forEach(overlay => {\r\n      if (overlay.get('isPlotText')) {\r\n        const style_ = overlay.getStyle()\r\n        style_['width'] = overlay.getWidth() + 'px'\r\n        style_['height'] = overlay.getHeight() + 'px'\r\n        rFeatures.push({\r\n          'type': 'Feature',\r\n          'geometry': {\r\n            'type': 'PlotText',\r\n            'coordinates': overlay.getPosition()\r\n          },\r\n          'properties': {\r\n            'id': overlay.getId(),\r\n            'width': overlay.getWidth(),\r\n            'height': overlay.getHeight(),\r\n            'style': style_,\r\n            'value': overlay.getValue()\r\n          }\r\n        })\r\n      }\r\n    })\r\n    return rFeatures\r\n  }\r\n  /**\r\n   * 将标绘对象转换为Json对象\r\n   * @param {*} feature \r\n   */\r\n  jsonFeature(feature){\r\n    let geom = feature.getGeometry();\r\n    let obj;\r\n    if (geom && geom.getCoordinates) {\r\n      let type = geom.getType()\r\n      let coordinates = geom.getCoordinates()\r\n      obj = {\r\n        'type': 'Feature',\r\n        'geometry': {\r\n          'type': type,\r\n          'coordinates': coordinates\r\n        },\r\n        'properties': {\r\n          'type': feature.getGeometry().getPlotType(),\r\n          'style': this.getStyleCode(feature),\r\n          'points': feature.getGeometry().getPoints()\r\n        }\r\n      };\r\n    }\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * 恢复相关标绘\r\n   * @param features\r\n   * @param funWrap 自定义包装函数\r\n   */\r\n  addFeatures (features, funWrap) {\r\n    if (features && Array.isArray(features) && features.length > 0) {\r\n      let layer = getLayerByLayerName(this.map, this.layerName)\r\n      if (!layer) {\r\n        layer = createVectorLayer(this.map, this.layerName, {\r\n          create: true\r\n        })\r\n        layer.setZIndex(this.options['zIndex'] || 99)\r\n      }\r\n      if (layer) {\r\n        let source = layer.getSource()\r\n        if (source && source instanceof VectorSource) {\r\n          const _extents = []\r\n          features.forEach((feature, index) => {\r\n            if (feature && feature['geometry'] && feature['geometry']['type'] !== 'PlotText') {\r\n              if (feature['properties']['type'] && Geometry[feature['properties']['type']]) {\r\n                let feat = new Feature({\r\n                  geometry: (new Geometry[feature['properties']['type']]([], feature['properties']['points'], feature['properties']))\r\n                })\r\n                feat.set('isPlot', true)\r\n                _extents.push(feat.getGeometry().getExtent())\r\n                if (feature['properties']['style']) {\r\n                  /* eslint new-cap: 0 */\r\n                  let style_ = new olStyleFactory(feature['properties']['style'])\r\n                  if (style_) {\r\n                    feat.setStyle(style_)\r\n                  }\r\n                }\r\n                funWrap(feat, index); //自定义包装\r\n                source.addFeature(feat)\r\n              } else {\r\n                console.warn('不存在的标绘类型！')\r\n              }\r\n            } else if (feature && feature['geometry'] && feature['geometry']['type'] === 'PlotText') {\r\n              _extents.push((new Point(feature.geometry['coordinates'])).getExtent())\r\n              const _plotText = new PlotTextBox({\r\n                id: feature.properties.id,\r\n                position: feature.geometry['coordinates'],\r\n                width: feature.properties['width'],\r\n                height: feature.properties['height'],\r\n                value: feature.properties['value'],\r\n                style: feature.properties.style\r\n              })  \r\n              if (this.map && this.map instanceof Map && _plotText) {            \r\n                funWrap(_plotText, index); //自定义包装\r\n                this.map.addOverlay(_plotText)\r\n              } else {\r\n                console.warn('未传入地图对象或者plotText创建失败！')\r\n              }\r\n            }\r\n          })\r\n          if (this.options['zoomToExtent'] && _extents && _extents.length > 0) {\r\n            const _extent = this._getExtent(_extents)\r\n            const size = this.map.getSize()\r\n            const _view = this.map.getView()\r\n            _view.fit(_extent, {\r\n              size: size,\r\n              duration: 800,\r\n              maxZoom: (_view.getMaxZoom() || undefined)\r\n            })\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  /**\r\n   * get extent\r\n   * @private\r\n   */\r\n  _getExtent (extents, params = {}) {\r\n    const bbox = [ Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY,\r\n      Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY]\r\n    let _extent = extents.reduce(function (prev, coord) {\r\n      return [\r\n        Math.min(coord[0], prev[0]),\r\n        Math.min(coord[1], prev[1]),\r\n        Math.max(coord[2], prev[2]),\r\n        Math.max(coord[3], prev[3])\r\n      ]\r\n    }, bbox)\r\n    let size = getSize(_extent)\r\n    let adjust = typeof params['adjust'] === 'number' ? params['adjust'] : 0.2\r\n    let minWidth = typeof params['minWidth'] === 'number' ? params['minWidth'] : 0.05\r\n    let minHeight = typeof params['minHeight'] === 'number' ? params['minHeight'] : 0.05\r\n    if (size[0] <= minWidth || size[1] <= minHeight) {\r\n      let bleft = getBottomLeft(_extent) // 获取xmin,ymin\r\n      let tright = getTopRight(_extent) // 获取xmax,ymax\r\n      let xmin = bleft[0] - adjust\r\n      let ymin = bleft[1] - adjust\r\n      let xmax = tright[0] + adjust\r\n      let ymax = tright[1] + adjust\r\n      _extent = buffer([xmin, ymin, xmax, ymax], adjust)\r\n    }\r\n    return _extent\r\n  }\r\n}\r\nexport default PlotUtils\r\n","import './scss/index.scss'\r\nimport PlotDraw from './core/PlotDraw'\r\nimport PlotEdit from './core/PlotEdit'\r\nimport PlotUtils from './core/PlotUtils'\r\nimport * as PlotTypes from './Utils/PlotTypes'\r\nimport * as Geometry from './Geometry'\r\nclass olPlot {\r\n  constructor (map, options) {\r\n    this.plotDraw = new PlotDraw(map, options)\r\n    this.plotEdit = new PlotEdit(map, options)\r\n    this.plotUtils = new PlotUtils(map, options)\r\n  }\r\n  static PlotTypes = PlotTypes\r\n  static Geometry = Geometry\r\n}\r\n\r\nexport default olPlot\r\n"],"names":["Observable","Events","__cnt","hasOwnKey","Function","call","bind","Object","hasOwnProperty","slice","Array","prototype","on","eventName","callback","context","bindEvent","un","event","key","r","type","that","eachEvent","keyA","itemA","keyB","itemB","once","action","args","item","apply","dispatch","arguments","setTimeout","dispatchSync","clear","isOne","Error","obj","FITTING_COUNT","HALF_PI","Math","PI","ZERO_TOLERANCE","TWO_PI","BASE_LAYERNAME","BASE_HELP_CONTROL_POINT_ID","BASE_HELP_HIDDEN","DEF_TEXT_STYEL","borderRadius","fontSize","outline","overflow","boxSizing","border","fontFamily","color","fontWeight","padding","fontStretch","lineHeight","textAlign","marginLeft","marginRight","width","height","background","fontStyle","fontVariant","MathDistance","pnt1","pnt2","sqrt","pow","wholeDistance","points","distance","isArray","length","forEach","index","getBaseLength","Mid","point1","point2","getCircleCenterOfThreePoints","point3","pntA","pntB","pntC","pntD","getIntersectPoint","f","x","y","e","getAzimuth","startPoint","endPoint","azimuth","angle","asin","abs","getAngleOfThreePoints","isClockWise","pnt3","getCubicValue","t","startPnt","cPnt1","cPnt2","endPnt","max","min","tp","t2","t3","tp2","tp3","getThirdPoint","clockWise","alpha","dx","cos","dy","sin","getArcPoints","center","radius","startAngle","endAngle","pnts","angleDiff","i","push","getBisectorNormals","normal","getNormal","bisectorNormalRight","bisectorNormalLeft","dt","dist","uX","uY","d1","d2","Constants","dX1","dY1","dX2","dY2","getLeftMostControlPoint","controlPoints","controlX","controlY","normalRight","mid","pX","pY","n","nX","nY","a11","a12","a22","dX","dY","getRightMostControlPoint","count","normalLeft","getCurvePoints","leftControl","normals","normalPoints","concat","rightControl","pnt","getBezierPoints","bezierPoints","factor","getBinomialFactor","a","b","getFactorial","result","getQBSplinePoints","bSplinePoints","m","k","getQuadricBSplineFactor","res","getuuid","s","hexDigits","substr","floor","random","join","isObject","value","merge","bindAll","fns","fn","getLayerByLayerName","map","layerName","targetLayer","layers","getLayers","getArray","getLayerInternal","console","log","_target","every","layer","$Group","get","createVectorLayer","params","vectorLayer","$VectorLayer","create","layerType","source","$VectorSource","wrapX","style","$Style","fill","$Fill","stroke","$Stroke","image","$Circle","set","selectable","_vectorLayer","addLayer","global","factory","module","exports","this","Map","keys","values","has","indexOf","delete","_delete","splice","createEvent","name","Event","bubbles","evt","document","initEvent","assign","ta","nodeName","heightOffset","clientWidth","cachedHeight","init","window","getComputedStyle","resize","parseFloat","paddingTop","paddingBottom","borderTopWidth","borderBottomWidth","isNaN","update","changeOverflow","offsetWidth","overflowY","getParentOverflows","el","arr","parentNode","Element","scrollTop","node","scrollHeight","overflows","docTop","documentElement","styleHeight","round","computed","actualHeight","offsetHeight","dispatchEvent","err","pageResize","destroy","removeEventListener","overflowX","wordWrap","addEventListener","methods","autosize","options","default","SPECIAL_CHARS_REGEXP","MOZ_HACK_REGEXP","tagName","className","container","id","createElement","appendChild","getElement","getElementById","remove","parent","removeChild","createHidden","element","display","camelCase","replace","_","separator","letter","offset","toUpperCase","handler","off","hasClass","cls","classList","contains","getStyle","styleName","defaultView","setStyle","prop","filter","PlotTextBox","stopEvent","positioning","insertFirst","autoPan","autoPanAnimation","autoPanMargin","setOffset","undefined","setPositioning","mapDragPan","isClick_","dragging_","isFocus_","options_","_position","handleTimer_","currentPixel_","createTextContent","_className","content","minHeight","setAttribute","handleFocus_","handleBlur_","handleClick_","handleDragStart_","handleDragEnd_","setElement","createCloseButton","createResizeButton","setPosition","overlay","uuid","getTextAreaFromContent_","_node","childrens_","children","ele","nodeType","toLowerCase","_closeSpan","closeCurrentPlotText","_resizeSpan","handleResizeMouseDown_","handleResizeMouseMove_","resizeButtonMoveHandler_","pixel_","pixel","element_","_offset","_size","_width","_height","getMap","render","stopImmediatePropagation","getViewport","handleResizeMouseUp_","target","_id","getAttribute","_overlay","getOverlayById","removeOverlay","isMoveModel","clearTimeout","disableMapDragPan","preCursor_","cursor","handleDragDrag_","getCoordinateFromPixel","clientX","clientY","enableMapDragPan","range","getSelection","getRangeAt","collapsed","_element","_style","setValue","getValue","getWidth","getHeight","_map","$DragPan","addInteraction","interactions","getInteractions","removeInteraction","setMap","Overlay","TEXTAREA","ARC","CURVE","GATHERING_PLACE","POLYLINE","FREEHANDLINE","POINT","PENNANT","RECTANGLE","CIRCLE","ELLIPSE","LUNE","SECTOR","CLOSED_CURVE","POLYGON","FREE_POLYGON","ATTACK_ARROW","DOUBLE_ARROW","STRAIGHT_ARROW","FINE_ARROW","ASSAULT_DIRECTION","TAILED_ATTACK_ARROW","SQUAD_COMBAT","TAILED_SQUAD_COMBAT","RECTFLAG","TRIANGLEFLAG","CURVEFLAG","Point","coordinates","point","fixPointCount","setPoints","setCoordinates","getPlotType","generate","isPlot","getPoints","getPointCount","updatePoint","updateLastPoint","finishDrawing","$Point","Pennant","Polyline","freehand","LineString","Arc","PlotUtils","angle1","angle2","Circle","generatePoints","Polygon","Curve","FreeHandLine","RectAngle","isFill","extent","boundingExtent","polygon","fromExtent","getCoordinates","start","end","$Polygon","Ellipse","majorRadius","minorRadius","Lune","d","Sector","pList","ClosedCurve","FreePolygon","AttackArrow","headHeightFactor","headWidthFactor","neckHeightFactor","neckWidthFactor","headTailFactor","tailLeft","tailRight","midTail","bonePnts","headPnts","getArrowHeadPoints","neckLeft","neckRight","tailWidthFactor","bodyPnts","getArrowBodyPoints","leftPnts","rightPnts","reverse","getArrowPoints","midPnt","len","midPnt1","midPnt2","arrowPnts","neckLeftPoint","neckRightPoint","lPoints","rPoints","headHeight","headPnt","tailWidth","headWidth","neckWidth","neckHeight","headEndPnt","neckEndPnt","headLeft","headRight","allLen","widthDif","tempLen","leftBodyPnts","rightBodyPnts","w","left","right","getTempPoint4","linePnt1","linePnt2","symPnt","distance1","distance2","DoubleArrow","connPoint","tempPoint4","leftArrowPnts","rightArrowPnts","llBodyPnts","lArrowPnts","lrBodyPnts","rlBodyPnts","rArrowPnts","rrBodyPnts","StraightArrow","maxArrowLength","arrowLengthScale","leftPnt","rightPnt","FineArrow","headAngle","neckAngle","cont","AssaultDirection","TailedAttackArrow","swallowTailFactor","swallowTailPnt","SquadCombat","tailPnts","getTailPoints","TailedSquadCombat","GatheringPlace","RectFlag","calculatePonits","components","point4","TriangleFlag","CurveFlag","point5","point6","point7","point8","point9","point10","point11","curve1","curve2","PlotDraw","plot","feature","plotType","plotParams","mapViewport","dblClickZoomInteraction","drawInteraction_","drawLayer","setZIndex","createPlot","_params","PlotTypes","Plots","active","disActive","deactiveMapTools","activeInteraction","some","mapFirstClickHandler","warn","$DrawInteraction","$Icon","anchor","anchorXUnits","anchorYUnits","opacity","src","geometryFunction","createBox","textAreaDrawEnd","getGeometry","getExtent","_center","topLeft","getPixelFromCoordinate","bottomRight","_plotText","position","addOverlay","info","removeEventHandlers","activateMapTools","isDrawing","coordinate","Feature","getSource","addFeature","drawEnd","mapNextClickHandler","mapDoubleClickHandler","mapMouseMoveHandler","setProperties","preventDefault","originalEvent","removeFeature","DoubleClickZoom","PlotEdit","activePlot","ghostControlPoints","mouseOver","elementTable","activeControlPointId","previousCursor_","initHelperDom","getMapParentElement","hiddenDiv","htmlUtils","cPnts","getControlPoints","mapElement","getTargetElement","destroyHelperDom","controlPointMouseDownHandler","controlPointMouseMoveHandler2","initControlPoints","controlPointMouseMoveHandler","controlPointMouseUpHandler","activate","deactivate","plotMouseOverOutHandler","geom","forEachFeatureAtPixel","plotMouseDownHandler","plotMouseUpHandler","plotMouseMoveHandler","deltaX","deltaY","newPoints","_geometry","disconnectEventHandlers","DragPan","StyleFactory","option","Style","Geometry","setGeometry","setFill","_getFill","setImage","_getImage","setStroke","_getStroke","setText","_getText","_getRegularShape","regularShape","RegularShape","radius1","radius2","snapToPixel","rotation","rotateWithView","atlasManager","_getIcon","icon","Icon","anchorOrigin","crossOrigin","img","offsetOrigin","scale","size","imgSize","error","Stroke","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","text","Text","font","offsetX","offsetY","textBaseline","Fill","getBaseStyle","VectorLayer","setIcon","tempStyle","clone","_image","setBackgroundColor","backgroundColor","getFill","getColor","tempColor","asArray","_color","currentColor","handleBackgroundColor","setColor","setOpacity","setBorderColor","borderColor","getStroke","setBorderWidth","borderWidth","setWidth","colorTarget","asString","fixObject","getStroke_","olStyle_","getLineDash","getLineDashOffset","getLineCap","getLineJoin","getMiterLimit","getFill_","getText_","getText","getFont","getOffsetX","getOffsetY","getScale","getRotation","getTextAlign","getTextBaseline","getRotateWithView","getImage_","getImage","getAnchor","getSrc","getSize","getOpacity","getSnapToPixel","getOrigin","getRadius","getRadius2","getAngle","getStyleCode","rgbaArray","fillColor","removeAllFeatures","overlays_","getOverlays","getFeatures","rFeatures","VectorSource","features","jsonFeature","style_","getPosition","getId","getType","addFeatures","funWrap","_extents","feat","geometry","olStyleFactory","properties","_extent","_getExtent","_view","getView","fit","duration","maxZoom","getMaxZoom","extents","bbox","Number","POSITIVE_INFINITY","NEGATIVE_INFINITY","reduce","prev","coord","adjust","minWidth","bleft","getBottomLeft","tright","getTopRight","xmin","ymin","xmax","ymax","buffer","olPlot","plotDraw","plotEdit","plotUtils"],"mappings":"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"}